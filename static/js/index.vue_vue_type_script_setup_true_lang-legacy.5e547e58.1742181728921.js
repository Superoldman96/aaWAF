!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function i(e,n,r){return(n=function(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===t(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return e};var e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(T){s=function(t,e,n){return t[e]=n}}function d(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),l=new E(r||[]);return o(a,"_invoke",{value:C(t,n,l)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=d;var p={};function v(){}function h(){}function m(){}var y={};s(y,l,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(O([])));b&&b!==n&&r.call(b,l)&&(y=b);var w=m.prototype=v.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(e,n){function i(o,a,l,u){var c=f(e[o],e,a);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==t(d)&&r.call(d,"__await")?n.resolve(d.__await).then((function(t){i("next",t,l,u)}),(function(t){i("throw",t,l,u)})):n.resolve(d).then((function(t){s.value=t,l(s)}),(function(t){return i("throw",t,l,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(t,e){function r(){return new n((function(n,r){i(t,e,n,r)}))}return a=a?a.then(r,r):r()}})}function C(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return U()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=k(a,n);if(l){if(l===p)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function k(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function R(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(R,this),this.reset(!0)}function O(t){if(t){var e=t[l];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:U}}function U(){return{value:void 0,done:!0}}return h.prototype=m,o(w,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:h,configurable:!0}),h.displayName=s(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,s(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},x(_.prototype),s(_.prototype,u,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new _(d(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(w),s(w,c,"Generator"),s(w,l,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=O,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),F(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;F(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function l(t,e,n,r,o,i,a){try{var l=t[i](a),u=l.value}catch(c){return void n(c)}l.done?e(u):Promise.resolve(u).then(r,o)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){l(i,r,o,a,u,"next",t)}function u(t){l(i,r,o,a,u,"throw",t)}a(void 0)}))}}System.register(["./index.vue_vue_type_script_setup_true_lang-legacy.a7590e54.1742181728921.js","./index-legacy.b0161ddd.1742181728921.js","./index.vue_vue_type_script_setup_true_lang-legacy.c6779449.1742181728921.js","./index.vue_vue_type_script_setup_true_lang-legacy.0b622738.1742181728921.js","./index.vue_vue_type_script_setup_true_lang-legacy.24bf6686.1742181728921.js","./vue-legacy.fb39cc53.1742181728921.js","./random-legacy.fc4be53c.1742181728921.js","./utils-legacy.9d6b10a2.1742181728921.js","./DataTable-legacy.ce503b2f.1742181728921.js","./ButtonGroup-legacy.91774f36.1742181728921.js","./InputNumber-legacy.cf3e32ba.1742181728921.js","./layer-legacy.05c99610.1742181728921.js","./area-legacy.e5c07d65.1742181728921.js"],(function(t,n){"use strict";var r,i,l,c,s,d,f,p,v,h,m,y,g,b,w,x,_,C,k,R,F,E,O,U,T,S,j,I,M,L,A,$,N,P,D,z,W,B,q,G,H,Y,K,V,X,J,Q,Z,tt,et,nt,rt,ot,it,at,lt,ut,ct,st,dt,ft,pt,vt,ht,mt,yt;return{setters:[function(t){r=t._},function(t){i=t.cu,l=t.au,c=t.r,s=t.f,d=t._,f=t.l,p=t.x,v=t.m,h=t.k,m=t.e,y=t.c$,g=t.d0,b=t.n,w=t.u,x=t.o,_=t.$,C=t.d1,k=t.d2,R=t.A},function(t){F=t._},function(t){E=t.c,O=t._},function(t){U=t._},function(t){T=t.x,S=t.m,j=t.d,I=t.o,M=t.b,L=t.e,A=t.k,$=t.$,N=t.ae,P=t.X,D=t.f,z=t.J,W=t.P,B=t.aa,q=t.S,G=t.a2,H=t.a3,Y=t.U,K=t.r,V=t.W,X=t.c,J=t.F,Q=t._,Z=t.a7,tt=t.ac,et=t.ao,nt=t.u,rt=t.G,ot=t.A,it=t.s,at=t.ap,lt=t.l,ut=t.ad,ct=t.y,st=t.K},function(t){dt=t.g},function(t){ft=t._},function(t){pt=t.a},function(t){vt=t._},function(t){ht=t.N},function(t){t.c,mt=t.g},function(t){yt=t.a}],execute:function(){var n=document.createElement("style");n.textContent=".seg[data-v-bd6ea0ee]{width:1px;height:8px;margin:0 auto;border-left:1px solid #ccc}.tips[data-v-65c342b6]{position:absolute;top:32px;left:0;width:100%;padding-top:2px;padding-left:2px;color:#999}.rows[data-v-67192deb]{display:flex}.rows .field[data-v-67192deb],.rows .condition[data-v-67192deb]{width:140px;margin-right:8px}.rows .content[data-v-67192deb]{display:flex;flex:1;width:0;flex-shrink:0}.rows .btn[data-v-67192deb]{display:flex;align-items:center;margin-left:8px}.rows .btn .close[data-v-67192deb]{display:flex;align-items:center;justify-content:center;width:24px;height:32px;margin-left:8px;color:#666;cursor:pointer;transition:opacity .3s}.rows .btn .close[data-v-67192deb]:hover{opacity:.8}.rows.title>div[data-v-67192deb]{padding-bottom:8px}.title[data-v-40bb34f3]{margin-bottom:12px;font-size:16px}.seg[data-v-c29781f1]{width:1px;height:6px;margin:0 auto;border-left:1px solid #ccc}.tips[data-v-45f1adfa]{position:absolute;top:32px;left:0;width:100%;padding-top:2px;padding-left:2px;color:#999}.rows[data-v-b0b0e6e6]{display:flex}.rows .field[data-v-b0b0e6e6],.rows .condition[data-v-b0b0e6e6]{width:140px;margin-right:8px}.rows .content[data-v-b0b0e6e6]{display:flex;flex:1;width:0;flex-shrink:0}.rows .btn[data-v-b0b0e6e6]{display:flex;align-items:center;margin-left:8px}.rows .btn .icon-btn[data-v-b0b0e6e6]{display:flex;align-items:center;justify-content:center;width:24px;height:32px;color:#666;cursor:pointer;transition:opacity .3s}.rows .btn .icon-btn[data-v-b0b0e6e6]:hover{opacity:.8}.rows.title>div[data-v-b0b0e6e6]{padding-bottom:8px}.title[data-v-2e1c5be7]{margin-bottom:12px;font-size:16px}.seg[data-v-80ea132e]{width:1px;height:8px;margin:0 auto;border-left:1px solid #ccc}.tips[data-v-be3da913]{position:absolute;top:32px;left:0;width:100%;padding-top:2px;padding-left:2px;color:#999}.rows[data-v-712bd08b]{display:flex}.rows .field[data-v-712bd08b],.rows .condition[data-v-712bd08b]{width:140px;margin-right:8px}.rows .content[data-v-712bd08b]{display:flex;flex:1;width:0;flex-shrink:0}.rows .btn[data-v-712bd08b]{display:flex;align-items:center;margin-left:8px}.rows .btn .close[data-v-712bd08b]{display:flex;align-items:center;justify-content:center;width:24px;height:32px;margin-left:8px;color:#666;cursor:pointer;transition:opacity .3s}.rows .btn .close[data-v-712bd08b]:hover{opacity:.8}.rows.title>div[data-v-712bd08b]{padding-bottom:8px}.title[data-v-f5d17401]{margin-bottom:12px;font-size:16px}\n",document.head.appendChild(n);var gt=Symbol("custom-rule");function bt(t){T(gt,t)}function wt(){return S(gt)}var xt=j({__name:"index",props:{count:{default:0}},setup:function(t){return function(t,e){var n=ft;return I(),M(n,{size:"small",type:t.count>0?"success":"default",bordered:!1},{default:L((function(){return[A($(t.count.toLocaleString()),1)]})),_:1},8,["type"])}}}),_t={exports:{}};
/*!
			 * clipboard.js v2.0.11
			 * https://clipboardjs.com/
			 *
			 * Licensed MIT © Zeno Rocha
			 */
!function(t,e){var n;n=function(){return function(){var t={686:function(t,e,n){n.d(e,{default:function(){return _}});var r=n(279),o=n.n(r),i=n(370),a=n.n(i),l=n(817),u=n.n(l);function c(t){try{return document.execCommand(t)}catch(e){return!1}}var s=function(t){var e=u()(t);return c("cut"),e},d=function(t,e){var n=function(t){var e="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[e?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(r,"px"),n.setAttribute("readonly",""),n.value=t,n}(t);e.container.appendChild(n);var r=u()(n);return c("copy"),n.remove(),r},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body},n="";return"string"==typeof t?n=d(t,e):t instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(null==t?void 0:t.type)?n=d(t.value,e):(n=u()(t),c("copy")),n};function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}var v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.action,n=void 0===e?"copy":e,r=t.container,o=t.target,i=t.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==o){if(!o||"object"!==p(o)||1!==o.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&o.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(o.hasAttribute("readonly")||o.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return i?f(i,{container:r}):o?"cut"===n?s(o):f(o,{container:r}):void 0};function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},y(t,e)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r,o,i=b(t);if(e){var a=b(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return r=this,!(o=n)||"object"!==h(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):o}}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}function w(t,e){var n="data-clipboard-".concat(t);if(e.hasAttribute(n))return e.getAttribute(n)}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(i,t);var e,n,r,o=g(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this)).resolveOptions(e),n.listenClick(t),n}return e=i,n=[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===h(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=a()(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget,n=this.action(e)||"copy",r=v({action:n,container:this.container,target:this.target(e),text:this.text(e)});this.emit(r?"success":"error",{action:n,text:r,trigger:e,clearSelection:function(){e&&e.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(t){return w("action",t)}},{key:"defaultTarget",value:function(t){var e=w("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return w("text",t)}},{key:"destroy",value:function(){this.listener.destroy()}}],r=[{key:"copy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{container:document.body};return f(t,e)}},{key:"cut",value:function(t){return s(t)}},{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach((function(t){n=n&&!!document.queryCommandSupported(t)})),n}}],n&&m(e.prototype,n),r&&m(e,r),i}(o()),_=x},828:function(t){if("undefined"!=typeof Element&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},438:function(t,e,n){var r=n(828);function o(t,e,n,r,o){var a=i.apply(this,arguments);return t.addEventListener(n,a,o),{destroy:function(){t.removeEventListener(n,a,o)}}}function i(t,e,n,o){return function(n){n.delegateTarget=r(n.target,e),n.delegateTarget&&o.call(t,n)}}t.exports=function(t,e,n,r,i){return"function"==typeof t.addEventListener?o.apply(null,arguments):"function"==typeof n?o.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return o(t,e,n,r,i)})))}},879:function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},370:function(t,e,n){var r=n(879),o=n(438);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!r.string(e))throw new TypeError("Second argument must be a String");if(!r.fn(n))throw new TypeError("Third argument must be a Function");if(r.node(t))return function(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}(t,e,n);if(r.nodeList(t))return function(t,e,n){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,n)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,n)}))}}}(t,e,n);if(r.string(t))return function(t,e,n){return o(document.body,t,e,n)}(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},817:function(t){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(t),r.removeAllRanges(),r.addRange(o),e=r.toString()}return e}},279:function(t){function e(){}e.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function o(){r.off(t,o),e.apply(n,arguments)}return o._=e,this.on(t,o,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,a=r.length;i<a;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},t.exports=e,t.exports.TinyEmitter=e}},e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}return n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n(686)}().default},t.exports=n()}(_t);var Ct=mt(_t.exports),kt=function(t){var e=void 0===(null==t?void 0:t.appendToBody)||t.appendToBody;return{toClipboard:function(t,n){return new Promise((function(r,o){var i=document.createElement("button"),a=new Ct(i,{text:function(){return t},action:function(){return"copy"},container:void 0!==n?n:document.body});a.on("success",(function(t){a.destroy(),r(t)})),a.on("error",(function(t){a.destroy(),o(t)})),e&&document.body.appendChild(i),i.click(),e&&document.body.removeChild(i)}))}}},Rt=j({__name:"index",props:{value:{default:null},isInit:{type:Boolean,default:!0}},setup:function(t){var e=N(t,"value"),n=i(),r=P(n).sitesOption,o=function(){e.value=r.value.map((function(t){return t.value}))},d=function(){e.value=[]},f=function(){var t=u(a().mark((function t(){var e,n,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:e=t.sent,n=e.res,o=n.list,c(o)?r.value=o.map((function(t){return{label:t.site_name||t.site_id,value:t.site_id}})):r.value=[];case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return f(),function(t,n){var i=s,a=vt,l=pt;return I(),M(l,z(t.$attrs,{value:W(e),"onUpdate:value":n[0]||(n[0]=function(t){return B(e)?e.value=t:null}),multiple:"","max-tag-count":"responsive",options:W(r),"consistent-menu-width":!1,filterable:"",disabled:!1,placeholder:"请选择网站"}),{action:L((function(){return[D(a,null,{default:L((function(){return[D(i,{onClick:o},{default:L((function(){return[A($(t.$t("CustomRule.Checkbox.All")),1)]})),_:1}),D(i,{onClick:d},{default:L((function(){return[A($(t.$t("CustomRule.Checkbox.NotAll")),1)]})),_:1})]})),_:1})]})),_:1},16,["value","options"])}}}),Ft={class:"my-18px"};var Et=d({},[["render",function(t,e){var n=ft;return I(),q("div",Ft,[D(n,{class:"w-38px justify-center"},{default:L((function(){return[A("Or")]})),_:1})])}]]),Ot={},Ut=function(t){return G("data-v-bd6ea0ee"),t=t(),H(),t},Tt={class:"flex flex-center flex-col w-38px"},St=Ut((function(){return Y("div",{class:"seg"},null,-1)})),jt=Ut((function(){return Y("div",{class:"seg"},null,-1)}));var It=d(Ot,[["render",function(t,e){var n=ft;return I(),q("div",Tt,[St,D(n,{class:"w-38px justify-center"},{default:L((function(){return[A("And")]})),_:1}),jt])}],["__scopeId","data-v-bd6ea0ee"]]),Mt=function(){return{areaOptions:K(yt.map((function(t,e){return 0===e?{label:t,value:"海外"}:1===e?{label:t,value:"中国"}:2===e?{label:t,value:"香港"}:3===e?{label:t,value:"澳门"}:4===e?{label:t,value:"台湾"}:{label:t,value:t}})))}},Lt={class:"relative flex items-center w-full h-full"},At={class:"tips"},$t=d(j({__name:"content",props:{input:{default:""},select:{default:null},condition:{default:null},factor:{},type:{default:"right"}},setup:function(t){var e=t,n=V().t,r=N(e,"input"),o=N(e,"select"),i=X((function(){return null===e.condition})),a=["select","area_select"],l=["in","not_in"],u=X((function(){return"text"===e.factor.widget.type})),d=X((function(){var t=e.factor;return a.includes(t.widget.type)})),p=X((function(){return"left"!==e.type&&l.includes(e.condition||"")})),v=Mt().areaOptions,h=X((function(){var t=e.factor.widget;return"area_select"===t.type?v.value:t.value.map((function(t){return{label:t.label,value:t.key}}))})),m=function(){o.value=h.value.map((function(t){return t.value}))},y=function(){o.value=[]},g=K(""),b=function(t){g.value=t},w=function(){""!==g.value&&(c(o.value)?c(o.value)&&!o.value.includes(g.value)&&o.value.push(g.value):o.value=[g.value],g.value="")};return function(t,e){var a=f,l=pt,c=s,v=vt;return I(),q("div",Lt,[W(u)?(I(),q(J,{key:0},[W(p)?(I(),M(l,{key:1,value:W(o),"onUpdate:value":e[1]||(e[1]=function(t){return B(o)?o.value=t:null}),tag:"",multiple:"",filterable:"","show-arrow":!1,show:!1,"max-tag-count":"responsive",placeholder:t.factor.widget.placeholder,onSearch:b,onBlur:w},null,8,["value","placeholder"])):(I(),M(a,{key:0,value:W(r),"onUpdate:value":e[0]||(e[0]=function(t){return B(r)?r.value=t:null}),spellcheck:"false",disabled:W(i),placeholder:t.factor.widget.placeholder},null,8,["value","disabled","placeholder"])),Y("div",At,$(t.factor.widget.hint?"".concat(t.factor.widget.hint).concat(W(p)?"，".concat(W(n)("CustomRule.Enter")):""):""),1)],64)):Q("",!0),W(d)?(I(),M(l,{key:1,value:W(o),"onUpdate:value":e[2]||(e[2]=function(t){return B(o)?o.value=t:null}),options:W(h),disabled:W(i),multiple:W(p),"max-tag-count":"responsive",placeholder:t.factor.widget.placeholder},Z({_:2},[W(p)?{name:"action",fn:L((function(){return[D(v,null,{default:L((function(){return[D(c,{onClick:m},{default:L((function(){return[A($(t.$t("CustomRule.Checkbox.All")),1)]})),_:1}),D(c,{onClick:y},{default:L((function(){return[A($(t.$t("CustomRule.Checkbox.NotAll")),1)]})),_:1})]})),_:1})]})),key:"0"}:void 0]),1032,["value","options","disabled","multiple","placeholder"])):Q("",!0)])}}}),[["__scopeId","data-v-65c342b6"]]),Nt=function(t){return G("data-v-67192deb"),t=t(),H(),t},Pt={class:"rows title"},Dt={class:"field"},zt={class:"condition"},Wt={class:"content"},Bt=Nt((function(){return Y("div",{class:"btn"},null,-1)})),qt={class:"rows"},Gt={class:"field"},Ht={class:"condition"},Yt={class:"content"},Kt={key:0,class:"w-140px mr-8px"},Vt={class:"flex-1 w-0"},Xt={class:"btn"},Jt=["onClick"],Qt=Nt((function(){return Y("div",null,null,-1)})),Zt=j({__name:"index",props:{isInit:{type:Boolean,default:!0},value:{default:function(){return[]}}},setup:function(t,e){var n=e.expose,r=t,o=N(r,"value"),a=i(),l=P(a).config,u={type:"or",children:[]},d={input:"",select:null,show:!1,widget:{hint:"",placeholder:"",type:"text",value:[]}},f={type:"and",field:null,condition:null,conOptions:[],leftFactor:E(d),rightFactor:E(d)},v=["select","area_select"],h=["in","not_in"],m=X((function(){return l.value?l.value.options.map((function(t){return{label:t.text,value:t.type,data:t}})):[]})),y=function(t,e){return function(n,r){var i=o.value[t].children[e],l=r.data;i.conOptions=l.operators.map((function(t){return{label:a.getOperatorName(t),value:t}})),i.condition=l.operators[0]||null,i.leftFactor=E(d),i.rightFactor=E(d),l.left_factor_enabled&&(i.leftFactor.show=l.left_factor_enabled,i.leftFactor.widget=l.left_widget),l.right_factor_enabled&&(i.rightFactor.widget=l.right_widget,i.rightFactor.show=l.right_factor_enabled)}},g=function(t,e){return function(n){var r=o.value[t].children[e].rightFactor,i=r.widget;if(v.includes(i.type)){if(null===r.select)return;h.includes(n||"")?r.select=c(r.select)?r.select:[r.select]:r.select=c(r.select)?r.select[0]:r.select}"text"===i.type&&(h.includes(n||"")&&""!==r.input&&(r.select=[r.input],r.input=""),null!==r.select&&(r.input=c(r.select)?r.select[0]:r.select))}},b=X((function(){return o.value.map((function(t){return t.children.length})).reduce((function(t,e){return t+e}))>1})),w=function(t,e){return e===o.value.length-1&&t===o.value[e].children.length-1},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o.value[e].children.splice(t+1,0,E(f))},_=function(){o.value.push(E(u)),x(0,o.value.length-1)},C=function(t,e,n){return"text"!==n.widget.type||h.includes(e)?"":t},k=function(t,e,n){return h.includes(e)?t?t.split(","):[]:v.includes(n.widget.type)&&t||null};return r.isInit&&0===o.value.length&&_(),n({setRules:function(t){var e=[];t.children.forEach((function(t){var n=E(u);t.children.forEach((function(t){var e=t.option;if(e){var r=E(f);r.field=e.type,r.condition=e.operator,function(t,e){if(l.value)for(var n=l.value.options,r=0;r<n.length;r++)if(n[r].type===t){e(n[r]);break}}(e.type,(function(t){if(t.left_factor_enabled){var n=(null==e?void 0:e.left_factor)||"";r.leftFactor.show=t.left_factor_enabled,r.leftFactor.widget=t.left_widget,r.leftFactor.input=C(n,e.operator,r.leftFactor),r.leftFactor.select=k(n,e.operator,r.leftFactor)}if(t.right_factor_enabled){var o=(null==e?void 0:e.right_factor)||"";r.rightFactor.show=t.right_factor_enabled,r.rightFactor.widget=t.right_widget,r.rightFactor.input=C(o,e.operator,r.rightFactor),r.rightFactor.select=k(o,e.operator,r.rightFactor)}r.conOptions=t.operators.map((function(t){return{label:a.getOperatorName(t),value:t}}))})),n.children.push(r)}})),e.push(n)})),e.length>0?o.value=e:_()}}),function(t,e){var n=pt,r=s,i=p;return I(),q("div",null,[Y("div",Pt,[Y("div",Dt,$(t.$t("CustomRule.Interdiction.Modal.Content.Rows.0")),1),Y("div",zt,$(t.$t("CustomRule.Interdiction.Modal.Content.Rows.1")),1),Y("div",Wt,$(t.$t("CustomRule.Interdiction.Modal.Content.Rows.2")),1),Bt]),(I(!0),q(J,null,tt(W(o),(function(t,e){return I(),q("div",{key:"".concat(e+1)},[0!==e?(I(),M(Et,{key:0})):Q("",!0),(I(!0),q(J,null,tt(t.children,(function(t,a){return I(),q("div",{key:"".concat(a+1)},[0!==a?(I(),M(It,{key:0})):Q("",!0),Y("div",qt,[Y("div",Gt,[D(n,z({value:t.field,"onUpdate:value":function(e){return t.field=e},options:W(m),"consistent-menu-width":!1},et({"update:value":y(e,a)})),null,16,["value","onUpdate:value","options"])]),Y("div",Ht,[t.leftFactor.show?(I(),M($t,{key:0,input:t.leftFactor.input,"onUpdate:input":function(e){return t.leftFactor.input=e},select:t.leftFactor.select,"onUpdate:select":function(e){return t.leftFactor.select=e},type:"left",condition:t.condition,factor:t.leftFactor},null,8,["input","onUpdate:input","select","onUpdate:select","condition","factor"])):(I(),M(n,z({key:1,value:t.condition,"onUpdate:value":function(e){return t.condition=e},disabled:null===t.field,options:t.conOptions},et({"update:value":g(e,a)})),null,16,["value","onUpdate:value","disabled","options"]))]),Y("div",Yt,[t.leftFactor.show?(I(),q("div",Kt,[D(n,z({value:t.condition,"onUpdate:value":function(e){return t.condition=e},disabled:null===t.field,options:t.conOptions},et({"update:value":g(e,a)})),null,16,["value","onUpdate:value","disabled","options"])])):Q("",!0),Y("div",Vt,[D($t,{input:t.rightFactor.input,"onUpdate:input":function(e){return t.rightFactor.input=e},select:t.rightFactor.select,"onUpdate:select":function(e){return t.rightFactor.select=e},type:"right",condition:t.condition,factor:t.rightFactor},null,8,["input","onUpdate:input","select","onUpdate:select","condition","factor"])])]),Y("div",Xt,[D(r,{onClick:function(t){return x(a,e)}},{default:L((function(){return[A("And")]})),_:2},1032,["onClick"]),w(a,e)?(I(),M(r,{key:0,class:"ml-8px",onClick:_},{default:L((function(){return[A("Or")]})),_:1})):Q("",!0),W(b)?(I(),q("div",{key:1,class:"close",onClick:function(t){return function(t,e){var n=o.value[e];n.children.length>1?n.children.splice(t,1):o.value.splice(e,1)}(a,e)}},[D(i,{name:"close",size:"16"})],8,Jt)):Q("",!0)])])])})),128))])})),128)),Qt])}}}),te=d(Zt,[["__scopeId","data-v-67192deb"]]),ee={class:"w-200px"},ne={class:"w-200px"},re=j({__name:"execute",props:{action:{default:"deny"},response:{default:null}},setup:function(t){var e,n=t,r=N(n,"action"),o=N(n,"response"),a=i(),l=P(a).executeOptions,u=K([]),c=function(t,e){var n=e.data.response;u.value=n.map((function(t){return{label:t.text,value:t.type}})),n.length>0?o.value=n[0].type:o.value=null};return e=l.value.find((function(t){return t.value===r.value})).data.response,u.value=e.map((function(t){return{label:t.text,value:t.type}})),e.length>0&&null===o.value&&(o.value=e[0].type),function(t,e){var n=pt,i=v;return I(),q(J,null,[D(i,{label:t.$t("CustomRule.Interdiction.Modal.Content.Action")},{default:L((function(){return[Y("div",ee,[D(n,{value:W(r),"onUpdate:value":[e[0]||(e[0]=function(t){return B(r)?r.value=t:null}),c],options:W(l)},null,8,["value","options"])])]})),_:1},8,["label"]),W(u).length>0?(I(),M(i,{key:0,"show-feedback":!1,label:"deny"===W(r)?t.$t("CustomRule.Interdiction.Modal.Content.Response"):t.$t("CustomRule.Interdiction.Modal.Content.Verification")},{default:L((function(){return[Y("div",ne,[D(n,{value:W(o),"onUpdate:value":e[1]||(e[1]=function(t){return B(o)?o.value=t:null}),options:W(u)},null,8,["value","options"])])]})),_:1},8,["label"])):Q("",!0)],64)}}}),oe={class:"w-800px p-24px"},ie={class:"title"},ae={class:"w-200px"},le=function(t){return G("data-v-40bb34f3"),t=t(),H(),t}((function(){return Y("span",null,"复制域名",-1)})),ue={class:"w-200px"},ce={class:"title mt-8px"},se={class:"flex-1"},de={class:"title mt-8px"},fe=j({__name:"index",setup:function(t,e){var n=e.expose,r=V().t,l=S("component-data"),d=l.isEdit,w=l.row,x=wt().getList,_=i(),C=P(_).sitesOption,k=nt({name:"",server:[],action:"deny",response:null}),R={name:{required:!0,message:"".concat(r("CustomRule.Interdiction.Modal.Content.RuleName.Placeholder")),trigger:["blur","input"]},rules:{validator:function(){for(var t=0;t<F.value.length;t++)for(var e=F.value[t],n=0;n<e.children.length;n++){var o=e.children[n];if(null===o.field||null===o.condition)return new Error("".concat(r("CustomRule.Interdiction.Modal.Content.Rules")));var i=o.leftFactor,a=o.rightFactor;if(i.show&&""===i.input&&null===i.select)return new Error("".concat(r("CustomRule.Interdiction.Modal.Content.Rules")));if(a.show&&""===a.input&&null===a.select)return new Error("".concat(r("CustomRule.Interdiction.Modal.Content.Rules")))}return!0}}},F=K([]),E=K(null),O=K(),U=K("");rt((function(){if(C.value.length>0){var t=k.server.map((function(t){var e=C.value.find((function(e){return e.value===t}));return null==e?void 0:e.label}));U.value=t.join(", ")}}));var T=kt().toClipboard,j=function(){var t=u(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T(U.value,e.currentTarget);case 3:h("复制成功"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),m("复制失败");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),M=function(){return{logic:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"or",type:"block",option:null,children:[]}},A=function(t){return{type:"option",logic:"",children:[],option:{type:t.field||"",operator:t.condition||"",left_factor:z(t.condition,t.leftFactor),right_factor:z(t.condition,t.rightFactor)}}},N=["in","not_in"],z=function(t,e){return"text"!==e.widget.type||N.includes(t||"")?c(e.select)?e.select.join(","):e.select||"":e.input},G=function(){var t,e=k.action,n=k.response;return"allow"===e&&null===n&&(k.response="black_page"),{name:k.name,servers:k.server?k.server:[],status:1,is_global:0,priority:0,root:(t=M(),F.value.forEach((function(e){var n=M("and");e.children.forEach((function(t){null===t.field&&null===t.condition||n.children.push(A(t))})),t.children.push(n)})),t),action:{type:k.action,response:{type:k.response||"",response_id:0,status:0,headers:{},body:""}}}},H=function(){var t=u(a().mark((function t(e){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=E.value)||void 0===n?void 0:n.validate();case 2:if(r=G(),!d){t.next=8;break}return t.next=6,y(o(o({},r),{},{id:w.id}));case 6:t.next=10;break;case 8:return t.next=10,g(r);case 10:x(),e();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return d&&(k.name=w.name,k.server=w.servers||null,k.action=w.action.type,k.response=w.action.response.type,ot((function(){O.value.setRules(w.root)}))),n({onConfirm:H}),function(t,e){var n=p,r=s,o=v,i=f,a=b;return I(),q("div",oe,[D(a,{ref_key:"formRef",ref:E,model:W(k),rules:R,"label-width":"116px","label-placement":"left","require-mark-placement":"left"},{default:L((function(){return[Y("div",ie,$(t.$t("CustomRule.Interdiction.Modal.Content.TitLe.0")),1),D(o,{label:t.$t("CustomRule.Interdiction.Modal.Content.Server")},{default:L((function(){return[Y("div",ae,[D(Rt,{value:W(k).server,"onUpdate:value":e[0]||(e[0]=function(t){return W(k).server=t}),"is-init":!W(d)},null,8,["value","is-init"])]),D(r,{size:"tiny",class:"ml-1.6rem",onClick:j},{default:L((function(){return[D(n,{name:"copy",class:"mr-1",size:"13"}),le]})),_:1})]})),_:1},8,["label"]),D(o,{label:t.$t("CustomRule.Interdiction.Modal.Content.RuleName.Name"),path:"name"},{default:L((function(){return[Y("div",ue,[D(i,{value:W(k).name,"onUpdate:value":e[1]||(e[1]=function(t){return W(k).name=t}),spellcheck:"false",placeholder:t.$t("CustomRule.Interdiction.Modal.Content.RuleName.Placeholder")},null,8,["value","placeholder"])])]})),_:1},8,["label"]),Y("div",ce,$(t.$t("CustomRule.Interdiction.Modal.Content.TitLe.1")),1),D(o,{label:"",class:"pl-36px",path:"rules"},{default:L((function(){return[Y("div",se,[D(te,{ref_key:"ruleRef",ref:O,value:W(F),"onUpdate:value":e[2]||(e[2]=function(t){return B(F)?F.value=t:null}),"is-init":!W(d)},null,8,["value","is-init"])])]})),_:1}),Y("div",de,$(t.$t("CustomRule.Interdiction.Modal.Content.TitLe.2")),1),D(re,{action:W(k).action,"onUpdate:action":e[3]||(e[3]=function(t){return W(k).action=t}),response:W(k).response,"onUpdate:response":e[4]||(e[4]=function(t){return W(k).response=t})},null,8,["action","response"])]})),_:1},8,["model"])])}}}),pe=d(fe,[["__scopeId","data-v-40bb34f3"]]),ve=Y("p",{class:"text-desc mb-10px"},"*注：命中次数每3秒钟且需要有新请求触发才会更新一次",-1);function he(t){return"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!lt(t)}t("_",j({__name:"index",setup:function(t){var n=V().t,l=i(),d=P(l).search,f=nt({data:[],total:0}),p=w(),v=p.loading,h=p.setLoading,m=function(){var t=u(a().mark((function t(){var e,n,r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h(!0),t.next=4,l.getConfig();case 4:return t.next=6,k(ut(d.value));case 6:e=t.sent,n=e.res,r=n.list,o=n.total,f.data=c(r)?r:[],f.total=o;case 11:return t.prev=11,h(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,,11,14]])})));return function(){return t.apply(this,arguments)}}(),y=function(){d.value.p=1,m()},b=nt({show:!1,title:"".concat(n("CustomRule.Interdiction.Modal.AddTitle")),data:{isEdit:!1,row:{}}}),E=function(){b.data.isEdit=!1,b.data.row={},b.title="".concat(n("CustomRule.Interdiction.Modal.AddTitle")),b.show=!0},T=K([{key:"name",title:"".concat(n("CustomRule.Interdiction.Table.Name")),minWidth:160,ellipsis:{tooltip:{width:"trigger"}}},{key:"servers",title:"".concat(n("CustomRule.Interdiction.Table.Servers")),width:"16%",minWidth:140,ellipsis:{tooltip:{width:"trigger"}},render:function(t){return l.getSiteName(t.servers)}},{key:"hit",title:"".concat(n("CustomRule.Interdiction.Table.Hit")),width:"10%",minWidth:100,render:function(t){return D(xt,{count:t.hit},null)}},{key:"root",title:"".concat(n("CustomRule.Interdiction.Table.Root")),width:"24%",minWidth:160,render:function(t){return function(t){var n=[];return function t(e){for(var r=0;r<e.length;r++)if("block"===e[r].type)t(e[r].children);else if("option"===e[r].type){var o=e[r].option;o&&n.push(o.type)}}(t.children),e(new Set(n)).map((function(t){return l.getConditionName(t)})).join("，")}(t.root)}},{key:"action",title:"".concat(n("CustomRule.Interdiction.Table.Action")),width:"12%",minWidth:120,render:function(t){var e,n=t.action;return l.getExecuteOpt(n.type,(null===(e=n.response)||void 0===e?void 0:e.type)||"")}},{key:"action",title:"".concat(n("Public.Table.Action")),width:"10%",minWidth:100,render:function(t){var e,r;return D("div",{class:"action"},[D(x,{onClick:function(){$(t)}},{default:function(){return[A("复制")]}}),D(x,{onClick:function(){S(t)}},he(e=n("Public.Btn.Edit"))?e:{default:function(){return[e]}}),D(x,{onClick:function(){j(t)}},he(r=n("Public.Btn.Del"))?r:{default:function(){return[r]}})])}}]),S=function(t){b.data.isEdit=!0,b.data.row=t,b.title="".concat(n("CustomRule.Interdiction.Modal.EditTitle"),"【").concat(t.name,"】"),b.show=!0},j=function(t){var e;_({title:"".concat(n("CustomRule.Interdiction.DelModal.TitLe"),"【").concat(t.name,"】"),content:"".concat(n("CustomRule.Interdiction.DelModal.Content")),onConfirm:(e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({ids:[t.id]});case 2:m();case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})},$=function(t){var e,n=function(t){var e=ut(t);return{name:"".concat(e.name,"_copy_").concat(dt(6)),servers:e.servers?e.servers:[],status:1,is_global:0,priority:0,root:e.root,action:{type:e.action.type,response:o(o({},e.action.response),{},{headers:{}})}}}(t);_({title:"复制规则【".concat(t.name,"】"),content:"是否复制该规则，并创建为新规则？",onConfirm:(e=u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(n);case 2:m();case 3:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})})};return bt({getList:m}),it((function(){m()})),at((function(){l.clearConfig()})),function(t,e){var n=s,o=U,i=O,a=F,l=R,u=r;return I(),M(u,null,{toolsLeft:L((function(){return[D(n,{type:"primary",onClick:E},{default:L((function(){return[A("添加自定义拦截")]})),_:1})]})),toolsRight:L((function(){return[D(o,{value:W(d).keyword,"onUpdate:value":e[0]||(e[0]=function(t){return W(d).keyword=t}),placeholder:t.$t("CustomRule.Search"),onSearch:y},null,8,["value","placeholder"])]})),content:L((function(){return[ve,D(i,{loading:W(v),data:W(f).data,columns:W(T)},null,8,["loading","data","columns"])]})),pageRight:L((function(){return[D(a,{page:W(d).p,"onUpdate:page":e[1]||(e[1]=function(t){return W(d).p=t}),"page-size":W(d).p_size,"onUpdate:pageSize":e[2]||(e[2]=function(t){return W(d).p_size=t}),"item-count":W(f).total,onRefresh:m},null,8,["page","page-size","item-count"])]})),modal:L((function(){return[D(l,{show:W(b).show,"onUpdate:show":e[3]||(e[3]=function(t){return W(b).show=t}),title:W(b).title,data:W(b).data,padding:"0","is-footer":!0,component:pe},null,8,["show","title","data"])]})),_:1})}}}));var me={class:"my-18px"};var ye=d({},[["render",function(t,e){var n=ft;return I(),q("div",me,[D(n,{class:"w-38px justify-center"},{default:L((function(){return[A("Or")]})),_:1})])}]]),ge={},be=function(t){return G("data-v-c29781f1"),t=t(),H(),t},we={class:"flex flex-center flex-col w-38px"},xe=be((function(){return Y("div",{class:"seg"},null,-1)})),_e=be((function(){return Y("div",{class:"seg"},null,-1)}));var Ce=d(ge,[["render",function(t,e){var n=ft;return I(),q("div",we,[xe,D(n,{size:"small",class:"w-38px justify-center"},{default:L((function(){return[A("And")]})),_:1}),_e])}],["__scopeId","data-v-c29781f1"]]),ke={class:"relative flex items-center w-full h-full"},Re={class:"tips"},Fe=d(j({__name:"content",props:{input:{default:""},select:{default:null},condition:{default:null},factor:{},type:{default:"right"}},setup:function(t){var e=t,n=V().t,r=N(e,"input"),o=N(e,"select"),i=X((function(){return null===e.condition})),a=["select","area_select"],l=["in","not_in"],u=X((function(){return"text"===e.factor.widget.type})),d=X((function(){var t=e.factor;return a.includes(t.widget.type)})),p=X((function(){return"left"!==e.type&&l.includes(e.condition||"")})),v=Mt().areaOptions,h=X((function(){var t=e.factor.widget;return"area_select"===t.type?v.value:t.value.map((function(t){return{label:t.label,value:t.key}}))})),m=function(){o.value=h.value.map((function(t){return t.value}))},y=function(){o.value=[]},g=K(""),b=function(t){g.value=t},w=function(){""!==g.value&&(c(o.value)?c(o.value)&&!o.value.includes(g.value)&&o.value.push(g.value):o.value=[g.value],g.value="")};return function(t,e){var a=f,l=pt,c=s,v=vt;return I(),q("div",ke,[W(u)?(I(),q(J,{key:0},[W(p)?(I(),M(l,{key:1,value:W(o),"onUpdate:value":e[1]||(e[1]=function(t){return B(o)?o.value=t:null}),tag:"",multiple:"",filterable:"","show-arrow":!1,show:!1,"max-tag-count":"responsive",placeholder:t.factor.widget.placeholder,onSearch:b,onBlur:w},null,8,["value","placeholder"])):(I(),M(a,{key:0,value:W(r),"onUpdate:value":e[0]||(e[0]=function(t){return B(r)?r.value=t:null}),spellcheck:"false",disabled:W(i),placeholder:t.factor.widget.placeholder},null,8,["value","disabled","placeholder"])),Y("div",Re,$(t.factor.widget.hint?"".concat(t.factor.widget.hint).concat(W(p)?"，".concat(W(n)("CustomRule.Enter")):""):""),1)],64)):Q("",!0),W(d)?(I(),M(l,{key:1,value:W(o),"onUpdate:value":e[2]||(e[2]=function(t){return B(o)?o.value=t:null}),options:W(h),disabled:W(i),multiple:W(p),"max-tag-count":"responsive",placeholder:t.factor.widget.placeholder},Z({_:2},[W(p)?{name:"action",fn:L((function(){return[D(v,null,{default:L((function(){return[D(c,{onClick:m},{default:L((function(){return[A($(t.$t("CustomRule.Checkbox.All")),1)]})),_:1}),D(c,{onClick:y},{default:L((function(){return[A($(t.$t("CustomRule.Checkbox.NotAll")),1)]})),_:1})]})),_:1})]})),key:"0"}:void 0]),1032,["value","options","disabled","multiple","placeholder"])):Q("",!0)])}}}),[["__scopeId","data-v-45f1adfa"]]),Ee={class:"mt-8px"},Oe={class:"rows title"},Ue={class:"field"},Te={class:"condition"},Se={class:"content"},je=function(t){return G("data-v-b0b0e6e6"),t=t(),H(),t}((function(){return Y("div",{class:"btn"},null,-1)})),Ie={class:"rows"},Me={class:"field"},Le={class:"condition"},Ae={class:"content"},$e={key:0,class:"w-140px mr-8px"},Ne={class:"flex-1 w-0"},Pe={class:"btn"},De=["onClick"],ze={class:"mt-24px"},We={class:"ml-8px"},Be=j({__name:"index",props:{isInit:{type:Boolean,default:!0},value:{default:function(){return[]}}},setup:function(t,e){var n=e.expose,r=t,o=N(r,"value"),a=i(),l=P(a).config,u={type:"or",children:[]},s={input:"",select:null,show:!1,widget:{hint:"",placeholder:"",type:"text",value:[]}},d={type:"and",field:null,condition:null,conOptions:[],leftFactor:E(s),rightFactor:E(s)},f=["select","area_select"],v=["in","not_in"],h=X((function(){return l.value?l.value.options.map((function(t){return{label:t.text,value:t.type,data:t}})):[]})),m=function(t,e){return function(n,r){var i=o.value[t].children[e],l=r.data;i.conOptions=l.operators.map((function(t){return{label:a.getOperatorName(t),value:t}})),i.condition=l.operators[0]||null,i.leftFactor=E(s),i.rightFactor=E(s),l.left_factor_enabled&&(i.leftFactor.show=l.left_factor_enabled,i.leftFactor.widget=l.left_widget),l.right_factor_enabled&&(i.rightFactor.widget=l.right_widget,i.rightFactor.show=l.right_factor_enabled)}},y=function(t,e){return function(n){var r=o.value[t].children[e].rightFactor,i=r.widget;if(f.includes(i.type)){if(null===r.select)return;v.includes(n||"")?r.select=c(r.select)?r.select:[r.select]:r.select=c(r.select)?r.select[0]:r.select}"text"===i.type&&(v.includes(n||"")&&""!==r.input&&(r.select=[r.input],r.input=""),null!==r.select&&(r.input=c(r.select)?r.select[0]:r.select))}},g=X((function(){return o.value.map((function(t){return t.children.length})).reduce((function(t,e){return t+e}))>1})),b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=o.value[e];void 0===t&&(t=n.children.length-1),n.children.splice(t+1,0,E(d))},w=function(){o.value.push(E(u)),b(0,o.value.length-1)},_=function(t,e,n){return"text"!==n.widget.type||v.includes(e)?"":t},C=function(t,e,n){return v.includes(e)?t?t.split(","):[]:f.includes(n.widget.type)&&t||null};return r.isInit&&0===o.value.length&&w(),n({setRules:function(t){var e=[];t.children.forEach((function(t){var n=E(u);t.children.forEach((function(t){var e=t.option;if(e){var r=E(d);r.field=e.type,r.condition=e.operator,function(t,e){if(l.value)for(var n=l.value.options,r=0;r<n.length;r++)if(n[r].type===t){e(n[r]);break}}(e.type,(function(t){if(t.left_factor_enabled){var n=(null==e?void 0:e.left_factor)||"";r.leftFactor.show=t.left_factor_enabled,r.leftFactor.widget=t.left_widget,r.leftFactor.input=_(n,e.operator,r.leftFactor),r.leftFactor.select=C(n,e.operator,r.leftFactor)}if(t.right_factor_enabled){var o=(null==e?void 0:e.right_factor)||"";r.rightFactor.show=t.right_factor_enabled,r.rightFactor.widget=t.right_widget,r.rightFactor.input=_(o,e.operator,r.rightFactor),r.rightFactor.select=C(o,e.operator,r.rightFactor)}r.conOptions=t.operators.map((function(t){return{label:a.getOperatorName(t),value:t}}))})),n.children.push(r)}})),e.push(n)})),e.length>0?o.value=e:w()}}),function(t,e){var n=pt,r=p,i=x;return I(),q("div",Ee,[Y("div",Oe,[Y("div",Ue,$(t.$t("CustomRule.CcDefend.Modal.Content.Rows.0")),1),Y("div",Te,$(t.$t("CustomRule.CcDefend.Modal.Content.Rows.1")),1),Y("div",Se,$(t.$t("CustomRule.CcDefend.Modal.Content.Rows.2")),1),je]),(I(!0),q(J,null,tt(W(o),(function(t,e){return I(),q("div",{key:"".concat(e+1)},[0!==e?(I(),M(ye,{key:0})):Q("",!0),(I(!0),q(J,null,tt(t.children,(function(t,i){return I(),q("div",{key:"".concat(i+1)},[0!==i?(I(),M(Ce,{key:0})):Q("",!0),Y("div",Ie,[Y("div",Me,[D(n,z({value:t.field,"onUpdate:value":function(e){return t.field=e},options:W(h),"consistent-menu-width":!1},et({"update:value":m(e,i)})),null,16,["value","onUpdate:value","options"])]),Y("div",Le,[t.leftFactor.show?(I(),M(Fe,{key:0,input:t.leftFactor.input,"onUpdate:input":function(e){return t.leftFactor.input=e},select:t.leftFactor.select,"onUpdate:select":function(e){return t.leftFactor.select=e},type:"left",condition:t.condition,factor:t.leftFactor},null,8,["input","onUpdate:input","select","onUpdate:select","condition","factor"])):(I(),M(n,z({key:1,value:t.condition,"onUpdate:value":function(e){return t.condition=e},disabled:null===t.field,options:t.conOptions},et({"update:value":y(e,i)})),null,16,["value","onUpdate:value","disabled","options"]))]),Y("div",Ae,[t.leftFactor.show?(I(),q("div",$e,[D(n,z({value:t.condition,"onUpdate:value":function(e){return t.condition=e},disabled:null===t.field,options:t.conOptions},et({"update:value":y(e,i)})),null,16,["value","onUpdate:value","disabled","options"])])):Q("",!0),Y("div",Ne,[D(Fe,{input:t.rightFactor.input,"onUpdate:input":function(e){return t.rightFactor.input=e},select:t.rightFactor.select,"onUpdate:select":function(e){return t.rightFactor.select=e},type:"right",condition:t.condition,factor:t.rightFactor},null,8,["input","onUpdate:input","select","onUpdate:select","condition","factor"])])]),Y("div",Pe,[W(g)?(I(),q("div",{key:0,class:"icon-btn",onClick:function(t){return function(t,e){var n=o.value[e];n.children.length>1?n.children.splice(t,1):o.value.splice(e,1)}(i,e)}},[D(r,{name:"close",size:"15"})],8,De)):Q("",!0)])])])})),128))])})),128)),Y("div",ze,[D(i,{onClick:e[0]||(e[0]=function(t){return b()})},{default:L((function(){return[A($(t.$t("CustomRule.CcDefend.Modal.Content.Add")),1)]})),_:1}),Y("span",We,$(t.$t("CustomRule.CcDefend.Modal.Content.Tip")),1)])])}}}),qe=d(Be,[["__scopeId","data-v-b0b0e6e6"]]),Ge={class:"w-200px"},He={class:"w-200px"},Ye={class:"w-200px"},Ke={class:"w-200px"},Ve=j({__name:"execute",props:{action:{default:"deny"},status:{default:null},response:{default:null},blockTime:{}},setup:function(t){var e,n=t,r=N(n,"action"),o=N(n,"blockTime"),a=N(n,"status"),l=N(n,"response"),u=i(),c=P(u),s=c.executeOptions,d=c.statusOptions,f=K([]),p=function(t,e){var n=e.data.response;f.value=n.map((function(t){return{label:t.text,value:t.type}})),n.length>0?l.value=n[0].type:l.value=null,"deny"===t?(a.value=d.value[0].value,l.value="no_response"):a.value=null};return e=s.value.find((function(t){return t.value===r.value})).data.response,f.value=e.map((function(t){return{label:t.text,value:t.type}})),e.length>0&&null===l.value&&(l.value=e[0].type),function(t,e){var n=pt,i=v,u=ht;return I(),q(J,null,[D(i,{label:t.$t("CustomRule.CcDefend.Modal.Content.Action")},{default:L((function(){return[Y("div",Ge,[D(n,{value:W(r),"onUpdate:value":[e[0]||(e[0]=function(t){return B(r)?r.value=t:null}),p],options:W(s)},null,8,["value","options"])])]})),_:1},8,["label"]),ct(D(i,{label:t.$t("CustomRule.CcDefend.Modal.Content.BlockTime")},{default:L((function(){return[Y("div",He,[D(u,{value:W(o),"onUpdate:value":e[1]||(e[1]=function(t){return B(o)?o.value=t:null}),"show-button":!1},{suffix:L((function(){return[A($(t.$t("Public.Unit.Seconds")),1)]})),_:1},8,["value"])])]})),_:1},8,["label"]),[[st,"deny"===W(r)]]),"deny"===W(r)?(I(),M(i,{key:0,"show-feedback":!1,label:t.$t("CustomRule.CcDefend.Modal.Content.Status")},{default:L((function(){return[Y("div",Ye,[D(n,{value:W(a),"onUpdate:value":e[2]||(e[2]=function(t){return B(a)?a.value=t:null}),options:W(d)},null,8,["value","options"])])]})),_:1},8,["label"])):Q("",!0),"validate"===W(r)?(I(),M(i,{key:1,"show-feedback":!1,label:t.$t("CustomRule.Interdiction.Modal.Content.Verification")},{default:L((function(){return[Y("div",Ke,[D(n,{value:W(l),"onUpdate:value":e[3]||(e[3]=function(t){return B(l)?l.value=t:null}),options:W(f)},null,8,["value","options"])])]})),_:1},8,["label"])):Q("",!0)],64)}}}),Xe={class:"w-700px p-24px"},Je={class:"title"},Qe={class:"w-200px"},Ze=function(t){return G("data-v-2e1c5be7"),t=t(),H(),t}((function(){return Y("span",null,"复制域名",-1)})),tn={class:"w-200px"},en={class:"title mt-8px"},nn={class:"w-200px"},rn={class:"w-200px"},on={class:"flex-1"},an={class:"title mt-8px"},ln=j({__name:"index",setup:function(t,e){var n=e.expose,r=S("component-data"),l=r.isEdit,d=r.row,w=V().t,x=wt().getList,_=i(),C=P(_).sitesOption,k=nt({name:"",server:[],action:"deny",response:"no_response",interval:60,threshold:300,blockTime:300,status:"444"}),R={name:{required:!0,message:"".concat(w("CustomRule.Interdiction.Modal.Content.RuleName.Placeholder")),trigger:["blur","input"]},rules:{validator:function(){for(var t=0;t<F.value.length;t++)for(var e=F.value[t],n=0;n<e.children.length;n++){var r=e.children[n];if(null===r.field||null===r.condition)return new Error(w("CustomRule.Interdiction.Modal.Content.Rules"));var o=r.leftFactor,i=r.rightFactor;if(o.show&&""===o.input&&null===o.select)return new Error(w("CustomRule.Interdiction.Modal.Content.Rules"));if(i.show&&""===i.input&&null===i.select)return new Error(w("CustomRule.Interdiction.Modal.Content.Rules"))}return!0}}},F=K([]),E=K(null),O=K(),U=K("");rt((function(){if(C.value.length>0){var t=k.server.map((function(t){var e=C.value.find((function(e){return e.value===t}));return null==e?void 0:e.label}));U.value=t.join(", ")}}));var T=kt().toClipboard,j=function(){var t=u(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T(U.value,e.currentTarget);case 3:h("复制成功"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),m("复制失败");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),M=function(){return{logic:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"or",type:"block",option:null,children:[]}},N=function(t){return{type:"option",logic:"",children:[],option:{type:t.field||"",operator:t.condition||"",left_factor:G(t.condition,t.leftFactor),right_factor:G(t.condition,t.rightFactor)}}},z=["in","not_in"],G=function(t,e){return"text"!==e.widget.type||z.includes(t||"")?c(e.select)?e.select.join(","):e.select||"":e.input},H=function(){var t,e=k.action,n=k.response;return"allow"===e&&null===n&&(k.response="black_page"),{name:k.name,src:2,status:1,is_global:0,priority:0,root:(t=M(),F.value.forEach((function(e){var n=M("and");e.children.forEach((function(t){null===t.field&&null===t.condition||n.children.push(N(t))})),t.children.push(n)})),t),servers:k.server?k.server:[],action:{type:k.action,block_time:k.blockTime,cc:{interval:k.interval,threshold:k.threshold},response:{type:k.response||"",response_id:0,status:Number(k.status),headers:{},body:""}}}},X=function(){var t=u(a().mark((function t(e){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=E.value)||void 0===n?void 0:n.validate();case 2:if(r=H(),!l){t.next=8;break}return t.next=6,y(o(o({},r),{},{id:d.id}));case 6:t.next=10;break;case 8:return t.next=10,g(r);case 10:x(),e();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return l&&(k.name=d.name,k.server=d.servers||null,k.action=d.action.type,k.response=d.action.response.type,k.blockTime=d.action.block_time,k.interval=d.action.cc.interval,k.threshold=d.action.cc.threshold,k.status="".concat(d.action.response.status),ot((function(){O.value.setRules(d.root)}))),n({onConfirm:X}),function(t,e){var n=p,r=s,o=v,i=f,a=ht,u=b;return I(),q("div",Xe,[D(u,{ref_key:"formRef",ref:E,model:W(k),rules:R,"label-width":"116px","label-placement":"left","require-mark-placement":"left"},{default:L((function(){return[Y("div",Je,$(t.$t("CustomRule.CcDefend.Modal.Content.TitLe.0")),1),D(o,{label:t.$t("CustomRule.CcDefend.Modal.Content.Server")},{default:L((function(){return[Y("div",Qe,[D(Rt,{value:W(k).server,"onUpdate:value":e[0]||(e[0]=function(t){return W(k).server=t}),"is-init":!W(l)},null,8,["value","is-init"])]),D(r,{size:"tiny",class:"ml-1.6rem",onClick:j},{default:L((function(){return[D(n,{name:"copy",class:"mr-1",size:"13"}),Ze]})),_:1})]})),_:1},8,["label"]),D(o,{label:t.$t("CustomRule.CcDefend.Modal.Content.RuleName.Name"),path:"name"},{default:L((function(){return[Y("div",tn,[D(i,{value:W(k).name,"onUpdate:value":e[1]||(e[1]=function(t){return W(k).name=t}),spellcheck:"false",placeholder:t.$t("CustomRule.CcDefend.Modal.Content.RuleName.Placeholder")},null,8,["value","placeholder"])])]})),_:1},8,["label"]),Y("div",en,$(t.$t("CustomRule.CcDefend.Modal.Content.TitLe.1")),1),D(o,{label:t.$t("CustomRule.CcDefend.Modal.Content.Interval"),path:"interval"},{default:L((function(){return[Y("div",nn,[D(a,{value:W(k).interval,"onUpdate:value":e[2]||(e[2]=function(t){return W(k).interval=t}),"show-button":!1},{suffix:L((function(){return[A($(t.$t("Public.Unit.Seconds")),1)]})),_:1},8,["value"])])]})),_:1},8,["label"]),D(o,{label:t.$t("CustomRule.CcDefend.Modal.Content.Threshold"),path:"threshold"},{default:L((function(){return[Y("div",rn,[D(a,{value:W(k).threshold,"onUpdate:value":e[3]||(e[3]=function(t){return W(k).threshold=t}),"show-button":!1},{suffix:L((function(){return[A($(t.$t("Public.Unit.Time")),1)]})),_:1},8,["value"])])]})),_:1},8,["label"]),D(o,{label:"",class:"pl-36px",path:"rules"},{default:L((function(){return[Y("div",on,[D(qe,{ref_key:"ruleRef",ref:O,value:W(F),"onUpdate:value":e[4]||(e[4]=function(t){return B(F)?F.value=t:null}),"is-init":!W(l)},null,8,["value","is-init"])])]})),_:1}),Y("div",an,$(t.$t("CustomRule.CcDefend.Modal.Content.TitLe.2")),1),D(Ve,{action:W(k).action,"onUpdate:action":e[5]||(e[5]=function(t){return W(k).action=t}),status:W(k).status,"onUpdate:status":e[6]||(e[6]=function(t){return W(k).status=t}),response:W(k).response,"onUpdate:response":e[7]||(e[7]=function(t){return W(k).response=t}),blockTime:W(k).blockTime,"onUpdate:blockTime":e[8]||(e[8]=function(t){return W(k).blockTime=t})},null,8,["action","status","response","blockTime"])]})),_:1},8,["model"])])}}}),un=d(ln,[["__scopeId","data-v-2e1c5be7"]]),cn=Y("p",{class:"text-desc mb-10px"},"*注：命中次数每3秒钟且需要有新请求触发才会更新一次",-1);function sn(t){return"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!lt(t)}t("a",j({__name:"index",setup:function(t){var n=V().t,o=i(),l=nt({type:2,p:1,p_size:20,keyword:""}),d=nt({data:[],total:0}),f=w(),p=f.loading,v=f.setLoading,h=function(){var t=u(a().mark((function t(){var e,n,r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(!0),t.next=4,o.getConfig(2);case 4:return t.next=6,k(ut(l));case 6:e=t.sent,n=e.res,r=n.list,i=n.total,d.data=c(r)?r:[],d.total=i;case 11:return t.prev=11,v(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,,11,14]])})));return function(){return t.apply(this,arguments)}}(),m=function(){l.p=1,h()},y=nt({show:!1,title:"".concat(n("CustomRule.CcDefend.Modal.AddTitle")),data:{isEdit:!1,row:{}}}),b=function(){y.data.isEdit=!1,y.data.row={},y.title="".concat(n("CustomRule.CcDefend.Modal.AddTitle")),y.show=!0},E=K([{key:"name",title:"".concat(n("CustomRule.CcDefend.Table.Name")),minWidth:160,ellipsis:{tooltip:{width:"trigger"}}},{key:"servers",title:"".concat(n("CustomRule.CcDefend.Table.Servers")),width:"16%",minWidth:140,ellipsis:{tooltip:{width:"trigger"}},render:function(t){return o.getSiteName(t.servers)}},{key:"hit",title:"".concat(n("CustomRule.CcDefend.Table.Hit")),width:"10%",minWidth:100,render:function(t){return D(xt,{count:t.hit},null)}},{key:"root",title:"".concat(n("CustomRule.CcDefend.Table.Root")),width:"26%",minWidth:160,render:function(t){return function(t){var n=[];return function t(e){for(var r=0;r<e.length;r++)if("block"===e[r].type)t(e[r].children);else if("option"===e[r].type){var o=e[r].option;o&&n.push(o.type)}}(t.children),e(new Set(n)).map((function(t){return o.getConditionName(t)})).join("，")}(t.root)}},{key:"action",title:"".concat(n("CustomRule.CcDefend.Table.Action")),width:"14%",minWidth:120,render:function(t){var e,n=t.action;return o.getExecuteOpt(n.type,(null===(e=n.response)||void 0===e?void 0:e.type)||"")}},{key:"action",title:"".concat(n("Public.Table.Action")),width:"10%",minWidth:80,render:function(t){var e,r;return D("div",{class:"action"},[D(x,{onClick:function(){j(t)}},{default:function(){return[A("复制")]}}),D(x,{onClick:function(){T(t)}},sn(e=n("Public.Btn.Edit"))?e:{default:function(){return[e]}}),D(x,{onClick:function(){S(t)}},sn(r=n("Public.Btn.Del"))?r:{default:function(){return[r]}})])}}]),T=function(t){y.data.isEdit=!0,y.data.row=t,y.title="".concat(n("CustomRule.CcDefend.Modal.EditTitle"),"【").concat(t.name,"】"),y.show=!0},S=function(t){var e;_({title:"".concat(n("CustomRule.CcDefend.DelModal.TitLe"),"【").concat(t.name,"】"),content:"".concat(n("CustomRule.CcDefend.DelModal.Content")),onConfirm:(e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({ids:[t.id]});case 2:h();case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})},j=function(t){var e,n=function(t){var e=ut(t);return{name:"".concat(e.name,"_copy_").concat(dt(6)),src:2,status:1,is_global:0,priority:0,root:e.root,servers:e.servers?e.servers:[],action:{type:e.action.type,block_time:e.action.block_time,cc:{interval:e.action.cc.interval,threshold:e.action.cc.threshold},response:{type:e.action.response.type||"",response_id:0,status:Number(e.action.response.status),headers:{},body:""}}}}(t);_({title:"复制规则【".concat(t.name,"】"),content:"是否复制该规则，并创建为新规则？",onConfirm:(e=u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(n);case 2:h();case 3:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})})};return bt({getList:h}),it((function(){h()})),at((function(){o.clearConfig()})),function(t,e){var n=s,o=U,i=O,a=F,u=R,c=r;return I(),M(c,null,{toolsLeft:L((function(){return[D(n,{type:"primary",onClick:b},{default:L((function(){return[A("添加自定义CC防御")]})),_:1})]})),toolsRight:L((function(){return[D(o,{value:W(l).keyword,"onUpdate:value":e[0]||(e[0]=function(t){return W(l).keyword=t}),placeholder:t.$t("CustomRule.Search"),onSearch:m},null,8,["value","placeholder"])]})),content:L((function(){return[cn,D(i,{loading:W(p),data:W(d).data,columns:W(E)},null,8,["loading","data","columns"])]})),pageRight:L((function(){return[D(a,{page:W(l).p,"onUpdate:page":e[1]||(e[1]=function(t){return W(l).p=t}),"page-size":W(l).p_size,"onUpdate:pageSize":e[2]||(e[2]=function(t){return W(l).p_size=t}),"item-count":W(d).total,onRefresh:h},null,8,["page","page-size","item-count"])]})),modal:L((function(){return[D(u,{show:W(y).show,"onUpdate:show":e[3]||(e[3]=function(t){return W(y).show=t}),title:W(y).title,data:W(y).data,padding:"0","is-footer":!0,component:un},null,8,["show","title","data"])]})),_:1})}}}));var dn={class:"my-18px"};var fn=d({},[["render",function(t,e){var n=ft;return I(),q("div",dn,[D(n,{class:"w-38px justify-center"},{default:L((function(){return[A("Or")]})),_:1})])}]]),pn={},vn=function(t){return G("data-v-80ea132e"),t=t(),H(),t},hn={class:"flex flex-center flex-col w-38px"},mn=vn((function(){return Y("div",{class:"seg"},null,-1)})),yn=vn((function(){return Y("div",{class:"seg"},null,-1)}));var gn=d(pn,[["render",function(t,e){var n=ft;return I(),q("div",hn,[mn,D(n,{class:"w-38px justify-center"},{default:L((function(){return[A("And")]})),_:1}),yn])}],["__scopeId","data-v-80ea132e"]]),bn={class:"relative flex items-center w-full h-full"},wn={class:"tips"},xn=d(j({__name:"content",props:{input:{default:""},select:{default:null},condition:{default:null},factor:{},type:{default:"right"}},setup:function(t){var e=t,n=V().t,r=N(e,"input"),o=N(e,"select"),i=X((function(){return null===e.condition})),a=["select","area_select"],l=["in","not_in"],u=X((function(){return"text"===e.factor.widget.type})),d=X((function(){var t=e.factor;return a.includes(t.widget.type)})),p=X((function(){return"left"!==e.type&&l.includes(e.condition||"")})),v=Mt().areaOptions,h=X((function(){var t=e.factor.widget;return"area_select"===t.type?v.value:t.value.map((function(t){return{label:t.label,value:t.key}}))})),m=function(){o.value=h.value.map((function(t){return t.value}))},y=function(){o.value=[]},g=K(""),b=function(t){g.value=t},w=function(){""!==g.value&&(c(o.value)?c(o.value)&&!o.value.includes(g.value)&&o.value.push(g.value):o.value=[g.value],g.value="")};return function(t,e){var a=f,l=pt,c=s,v=vt;return I(),q("div",bn,[W(u)?(I(),q(J,{key:0},[W(p)?(I(),M(l,{key:1,value:W(o),"onUpdate:value":e[1]||(e[1]=function(t){return B(o)?o.value=t:null}),tag:"",multiple:"",filterable:"","show-arrow":!1,show:!1,"max-tag-count":"responsive",placeholder:t.factor.widget.placeholder,onSearch:b,onBlur:w},null,8,["value","placeholder"])):(I(),M(a,{key:0,value:W(r),"onUpdate:value":e[0]||(e[0]=function(t){return B(r)?r.value=t:null}),spellcheck:"false",disabled:W(i),placeholder:t.factor.widget.placeholder},null,8,["value","disabled","placeholder"])),Y("div",wn,$(t.factor.widget.hint?"".concat(t.factor.widget.hint).concat(W(p)?"，".concat(W(n)("CustomRule.Enter")):""):""),1)],64)):Q("",!0),W(d)?(I(),M(l,{key:1,value:W(o),"onUpdate:value":e[2]||(e[2]=function(t){return B(o)?o.value=t:null}),options:W(h),disabled:W(i),multiple:W(p),"max-tag-count":"responsive",placeholder:t.factor.widget.placeholder},Z({_:2},[W(p)?{name:"action",fn:L((function(){return[D(v,null,{default:L((function(){return[D(c,{onClick:m},{default:L((function(){return[A($(t.$t("CustomRule.Checkbox.All")),1)]})),_:1}),D(c,{onClick:y},{default:L((function(){return[A($(t.$t("CustomRule.Checkbox.NotAll")),1)]})),_:1})]})),_:1})]})),key:"0"}:void 0]),1032,["value","options","disabled","multiple","placeholder"])):Q("",!0)])}}}),[["__scopeId","data-v-be3da913"]]),_n=function(t){return G("data-v-712bd08b"),t=t(),H(),t},Cn={class:"rows title"},kn={class:"field"},Rn={class:"condition"},Fn={class:"content"},En=_n((function(){return Y("div",{class:"btn"},null,-1)})),On={class:"rows"},Un={class:"field"},Tn={class:"condition"},Sn={class:"content"},jn={key:0,class:"w-140px mr-8px"},In={class:"flex-1 w-0"},Mn={class:"btn"},Ln=["onClick"],An=_n((function(){return Y("div",null,null,-1)})),$n=j({__name:"index",props:{isInit:{type:Boolean,default:!0},value:{default:function(){return[]}}},setup:function(t,e){var n=e.expose,r=t,o=N(r,"value"),a=i(),l=P(a).config,u={type:"or",children:[]},d={input:"",select:null,show:!1,widget:{hint:"",placeholder:"",type:"text",value:[]}},f={type:"and",field:null,condition:null,conOptions:[],leftFactor:E(d),rightFactor:E(d)},v=["select","area_select"],h=["in","not_in"],m=X((function(){return l.value?l.value.options.map((function(t){return{label:t.text,value:t.type,data:t}})):[]})),y=function(t,e){return function(n,r){var i=o.value[t].children[e],l=r.data;i.conOptions=l.operators.map((function(t){return{label:a.getOperatorName(t),value:t}})),i.condition=l.operators[0]||null,i.leftFactor=E(d),i.rightFactor=E(d),l.left_factor_enabled&&(i.leftFactor.show=l.left_factor_enabled,i.leftFactor.widget=l.left_widget),l.right_factor_enabled&&(i.rightFactor.widget=l.right_widget,i.rightFactor.show=l.right_factor_enabled)}},g=function(t,e){return function(n){var r=o.value[t].children[e].rightFactor,i=r.widget;if(v.includes(i.type)){if(null===r.select)return;h.includes(n||"")?r.select=c(r.select)?r.select:[r.select]:r.select=c(r.select)?r.select[0]:r.select}"text"===i.type&&(h.includes(n||"")&&""!==r.input&&(r.select=[r.input],r.input=""),null!==r.select&&(r.input=c(r.select)?r.select[0]:r.select))}},b=X((function(){return o.value.map((function(t){return t.children.length})).reduce((function(t,e){return t+e}))>1})),w=function(t,e){return e===o.value.length-1&&t===o.value[e].children.length-1},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o.value[e].children.splice(t+1,0,E(f))},_=function(){o.value.push(E(u)),x(0,o.value.length-1)},C=function(t,e,n){return"text"!==n.widget.type||h.includes(e)?"":t},k=function(t,e,n){return h.includes(e)?t?t.split(","):[]:v.includes(n.widget.type)&&t||null};return r.isInit&&0===o.value.length&&_(),n({setRules:function(t){var e=[];t.children.forEach((function(t){var n=E(u);t.children.forEach((function(t){var e=t.option;if(e){var r=E(f);r.field=e.type,r.condition=e.operator,function(t,e){if(l.value)for(var n=l.value.options,r=0;r<n.length;r++)if(n[r].type===t){e(n[r]);break}}(e.type,(function(t){if(t.left_factor_enabled){var n=(null==e?void 0:e.left_factor)||"";r.leftFactor.show=t.left_factor_enabled,r.leftFactor.widget=t.left_widget,r.leftFactor.input=C(n,e.operator,r.leftFactor),r.leftFactor.select=k(n,e.operator,r.leftFactor)}if(t.right_factor_enabled){var o=(null==e?void 0:e.right_factor)||"";r.rightFactor.show=t.right_factor_enabled,r.rightFactor.widget=t.right_widget,r.rightFactor.input=C(o,e.operator,r.rightFactor),r.rightFactor.select=k(o,e.operator,r.rightFactor)}r.conOptions=t.operators.map((function(t){return{label:a.getOperatorName(t),value:t}}))})),n.children.push(r)}})),e.push(n)})),e.length>0?o.value=e:_()}}),function(t,e){var n=pt,r=s,i=p;return I(),q("div",null,[Y("div",Cn,[Y("div",kn,$(t.$t("CustomRule.Interdiction.Modal.Content.Rows.0")),1),Y("div",Rn,$(t.$t("CustomRule.Interdiction.Modal.Content.Rows.1")),1),Y("div",Fn,$(t.$t("CustomRule.Interdiction.Modal.Content.Rows.2")),1),En]),(I(!0),q(J,null,tt(W(o),(function(t,e){return I(),q("div",{key:"".concat(e+1)},[0!==e?(I(),M(fn,{key:0})):Q("",!0),(I(!0),q(J,null,tt(t.children,(function(t,a){return I(),q("div",{key:"".concat(a+1)},[0!==a?(I(),M(gn,{key:0})):Q("",!0),Y("div",On,[Y("div",Un,[D(n,z({value:t.field,"onUpdate:value":function(e){return t.field=e},options:W(m),"consistent-menu-width":!1},et({"update:value":y(e,a)})),null,16,["value","onUpdate:value","options"])]),Y("div",Tn,[t.leftFactor.show?(I(),M(xn,{key:0,input:t.leftFactor.input,"onUpdate:input":function(e){return t.leftFactor.input=e},select:t.leftFactor.select,"onUpdate:select":function(e){return t.leftFactor.select=e},type:"left",condition:t.condition,factor:t.leftFactor},null,8,["input","onUpdate:input","select","onUpdate:select","condition","factor"])):(I(),M(n,z({key:1,value:t.condition,"onUpdate:value":function(e){return t.condition=e},disabled:null===t.field,options:t.conOptions},et({"update:value":g(e,a)})),null,16,["value","onUpdate:value","disabled","options"]))]),Y("div",Sn,[t.leftFactor.show?(I(),q("div",jn,[D(n,z({value:t.condition,"onUpdate:value":function(e){return t.condition=e},disabled:null===t.field,options:t.conOptions},et({"update:value":g(e,a)})),null,16,["value","onUpdate:value","disabled","options"])])):Q("",!0),Y("div",In,[D(xn,{input:t.rightFactor.input,"onUpdate:input":function(e){return t.rightFactor.input=e},select:t.rightFactor.select,"onUpdate:select":function(e){return t.rightFactor.select=e},type:"right",condition:t.condition,factor:t.rightFactor},null,8,["input","onUpdate:input","select","onUpdate:select","condition","factor"])])]),Y("div",Mn,[D(r,{onClick:function(t){return x(a,e)}},{default:L((function(){return[A("And")]})),_:2},1032,["onClick"]),w(a,e)?(I(),M(r,{key:0,class:"ml-8px",onClick:_},{default:L((function(){return[A("Or")]})),_:1})):Q("",!0),W(b)?(I(),q("div",{key:1,class:"close",onClick:function(t){return function(t,e){var n=o.value[e];n.children.length>1?n.children.splice(t,1):o.value.splice(e,1)}(a,e)}},[D(i,{name:"close",size:"16"})],8,Ln)):Q("",!0)])])])})),128))])})),128)),An])}}}),Nn=d($n,[["__scopeId","data-v-712bd08b"]]),Pn={class:"w-800px p-24px"},Dn={class:"title"},zn={class:"w-200px"},Wn=function(t){return G("data-v-f5d17401"),t=t(),H(),t}((function(){return Y("span",null,"复制域名",-1)})),Bn={class:"w-200px"},qn={class:"title mt-8px"},Gn={class:"flex-1"},Hn={class:"title mt-8px"},Yn={class:"w-200px"},Kn={class:"w-200px"},Vn={class:"w-200px"},Xn={class:"text-desc ml-12px"},Jn=j({__name:"index",setup:function(t,e){var n=e.expose,r=V().t,l=S("component-data"),d=l.isEdit,w=l.row,x=wt().getList,_=i(),C=P(_),k=C.executeOptions,R=C.sitesOption,F=X((function(){return k.value.find((function(t){return t.value===E.action})).data.response.map((function(t){return{label:t.text,value:parseFloat(t.type)}}))})),E=nt({name:"",server:[],action:"redirect",response:null,url:"",status:302}),O={name:{required:!0,message:"".concat(r("CustomRule.Interdiction.Modal.Content.RuleName.Placeholder")),trigger:["blur","input"]},rules:{validator:function(){for(var t=0;t<U.value.length;t++)for(var e=U.value[t],n=0;n<e.children.length;n++){var o=e.children[n];if(null===o.field||null===o.condition)return new Error("".concat(r("CustomRule.Interdiction.Modal.Content.Rules")));var i=o.leftFactor,a=o.rightFactor;if(i.show&&""===i.input&&null===i.select)return new Error("".concat(r("CustomRule.Interdiction.Modal.Content.Rules")));if(a.show&&""===a.input&&null===a.select)return new Error("".concat(r("CustomRule.Interdiction.Modal.Content.Rules")))}return!0}},operation:{required:!0,trigger:["blur","input"],validator:function(){return""!==E.url||new Error("url不能为空")}}},U=K([]),T=K(null),j=K(),M=K("");rt((function(){if(R.value.length>0){var t=E.server.map((function(t){var e=R.value.find((function(e){return e.value===t}));return null==e?void 0:e.label}));M.value=t.join(", ")}}));var A=kt().toClipboard,N=function(){var t=u(a().mark((function t(e){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A(M.value,e.currentTarget);case 3:h("复制成功"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),m("复制失败");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),z=function(){return{logic:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"or",type:"block",option:null,children:[]}},G=function(t){return{type:"option",logic:"",children:[],option:{type:t.field||"",operator:t.condition||"",left_factor:J(t.condition,t.leftFactor),right_factor:J(t.condition,t.rightFactor)}}},H=["in","not_in"],J=function(t,e){return"text"!==e.widget.type||H.includes(t||"")?c(e.select)?e.select.join(","):e.select||"":e.input},Q=function(){var t,e=E.action,n=E.response;return"allow"===e&&null===n&&(E.response="black_page"),{name:E.name,src:3,servers:E.server?E.server:[],status:1,is_global:0,priority:0,root:(t=z(),U.value.forEach((function(e){var n=z("and");e.children.forEach((function(t){null===t.field&&null===t.condition||n.children.push(G(t))})),t.children.push(n)})),t),action:{type:E.action,response:{type:"url",response_id:0,status:E.status,headers:{},body:E.url||""}}}},Z=function(){var t=u(a().mark((function t(e){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(n=T.value)||void 0===n?void 0:n.validate();case 2:if(r=Q(),!d){t.next=8;break}return t.next=6,y(o(o({},r),{},{id:w.id}));case 6:t.next=10;break;case 8:return t.next=10,g(r);case 10:x(),e();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return d&&(E.name=w.name,E.server=w.servers||null,E.action=w.action.type,E.response=w.action.response.type,E.url=w.action.response.body,E.status=w.action.response.status,ot((function(){j.value.setRules(w.root)}))),n({onConfirm:Z}),function(t,e){var n=p,r=s,o=v,i=f,a=pt,l=b;return I(),q("div",Pn,[D(l,{ref_key:"formRef",ref:T,model:W(E),rules:O,"label-width":"116px","label-placement":"left","require-mark-placement":"left"},{default:L((function(){return[Y("div",Dn,$(t.$t("CustomRule.Interdiction.Modal.Content.TitLe.0")),1),D(o,{label:t.$t("CustomRule.Interdiction.Modal.Content.Server")},{default:L((function(){return[Y("div",zn,[D(Rt,{value:W(E).server,"onUpdate:value":e[0]||(e[0]=function(t){return W(E).server=t}),"is-init":!W(d)},null,8,["value","is-init"])]),D(r,{size:"tiny",class:"ml-1.6rem",onClick:N},{default:L((function(){return[D(n,{name:"copy",class:"mr-1",size:"13"}),Wn]})),_:1})]})),_:1},8,["label"]),D(o,{label:t.$t("CustomRule.Interdiction.Modal.Content.RuleName.Name"),path:"name"},{default:L((function(){return[Y("div",Bn,[D(i,{value:W(E).name,"onUpdate:value":e[1]||(e[1]=function(t){return W(E).name=t}),spellcheck:"false",placeholder:t.$t("CustomRule.Interdiction.Modal.Content.RuleName.Placeholder")},null,8,["value","placeholder"])])]})),_:1},8,["label"]),Y("div",qn,$(t.$t("CustomRule.Interdiction.Modal.Content.TitLe.1")),1),D(o,{label:"",class:"pl-36px",path:"rules"},{default:L((function(){return[Y("div",Gn,[D(Nn,{ref_key:"ruleRef",ref:j,value:W(U),"onUpdate:value":e[2]||(e[2]=function(t){return B(U)?U.value=t:null}),"is-init":!W(d)},null,8,["value","is-init"])])]})),_:1}),Y("div",Hn,$(t.$t("CustomRule.Interdiction.Modal.Content.TitLe.2")),1),D(o,{label:t.$t("CustomRule.Interdiction.Modal.Content.Action")},{default:L((function(){return[Y("div",Yn,[D(a,{value:W(E).action,"onUpdate:value":e[3]||(e[3]=function(t){return W(E).action=t}),options:W(k)},null,8,["value","options"])])]})),_:1},8,["label"]),D(o,{label:"重定向类型"},{default:L((function(){return[Y("div",Kn,[D(a,{value:W(E).status,"onUpdate:value":e[4]||(e[4]=function(t){return W(E).status=t}),options:W(F)},null,8,["value","options"])])]})),_:1}),D(o,{label:"重定向url",path:"operation"},{default:L((function(){return[Y("div",Vn,[D(i,{value:W(E).url,"onUpdate:value":e[5]||(e[5]=function(t){return W(E).url=t}),placeholder:"请输入重定向url"},null,8,["value"])]),Y("div",Xn,$("示例：http://bt.com/1.html"),1)]})),_:1})]})),_:1},8,["model"])])}}}),Qn=d(Jn,[["__scopeId","data-v-f5d17401"]]),Zn=Y("p",{class:"text-desc mb-10px"},"*注：命中次数每3秒钟且需要有新请求触发才会更新一次",-1);function tr(t){return"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!lt(t)}t("b",j({__name:"index",setup:function(t){var n=V().t,o=i(),l=nt({type:3,p:1,p_size:20,keyword:""}),d=nt({data:[],total:0}),f=w(),p=f.loading,v=f.setLoading,h=function(){var t=u(a().mark((function t(){var e,n,r,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v(!0),t.next=4,o.getConfig(3);case 4:return t.next=6,k(ut(l));case 6:e=t.sent,n=e.res,r=n.list,i=n.total,d.data=c(r)?r:[],d.total=i;case 11:return t.prev=11,v(!1),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[0,,11,14]])})));return function(){return t.apply(this,arguments)}}(),m=function(){l.p=1,h()},y=nt({show:!1,title:"添加自定义重定向",data:{isEdit:!1,row:{}}}),b=function(){y.data.isEdit=!1,y.data.row={},y.title="添加自定义重定向",y.show=!0},E=K([{key:"name",title:"".concat(n("CustomRule.CcDefend.Table.Name")),minWidth:160,ellipsis:{tooltip:{width:"trigger"}}},{key:"servers",title:"".concat(n("CustomRule.CcDefend.Table.Servers")),width:"16%",minWidth:140,ellipsis:{tooltip:{width:"trigger"}},render:function(t){return o.getSiteName(t.servers)}},{key:"hit",title:"".concat(n("CustomRule.CcDefend.Table.Hit")),width:"10%",minWidth:100,render:function(t){return D(xt,{count:t.hit},null)}},{key:"root",title:"".concat(n("CustomRule.CcDefend.Table.Root")),width:"26%",minWidth:160,render:function(t){return function(t){var n=[];return function t(e){for(var r=0;r<e.length;r++)if("block"===e[r].type)t(e[r].children);else if("option"===e[r].type){var o=e[r].option;o&&n.push(o.type)}}(t.children),e(new Set(n)).map((function(t){return o.getConditionName(t)})).join("，")}(t.root)}},{key:"action",title:"".concat(n("CustomRule.CcDefend.Table.Action")),width:"14%",minWidth:120,render:function(t){var e,n=t.action;return o.getExecuteOpt(n.type,(null===(e=n.response)||void 0===e?void 0:e.type)||"")}},{key:"action",title:"".concat(n("Public.Table.Action")),width:"10%",minWidth:80,render:function(t){var e,r;return D("div",{class:"action"},[D(x,{onClick:function(){j(t)}},{default:function(){return[A("复制")]}}),D(x,{onClick:function(){T(t)}},tr(e=n("Public.Btn.Edit"))?e:{default:function(){return[e]}}),D(x,{onClick:function(){S(t)}},tr(r=n("Public.Btn.Del"))?r:{default:function(){return[r]}})])}}]),T=function(t){y.data.isEdit=!0,y.data.row=t,y.title="编辑自定义重定向【".concat(t.name,"】"),y.show=!0},S=function(t){var e;_({title:"".concat(n("CustomRule.CcDefend.DelModal.TitLe"),"【").concat(t.name,"】"),content:"".concat(n("CustomRule.CcDefend.DelModal.Content")),onConfirm:(e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({ids:[t.id]});case 2:h();case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})},j=function(t){var e,n=function(t){var e=ut(t);return{name:"".concat(e.name,"_copy_").concat(dt(6)),src:3,servers:e.servers?e.servers:[],status:1,is_global:0,priority:0,root:e.root,action:{type:e.action.type,response:{type:"url",response_id:0,status:e.action.response.status,headers:{},body:e.action.response.body||""}}}}(t);_({title:"复制规则【".concat(t.name,"】"),content:"是否复制该规则，并创建为新规则？",onConfirm:(e=u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(n);case 2:h();case 3:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})})};return bt({getList:h}),it((function(){h()})),at((function(){o.clearConfig()})),function(t,e){var n=s,o=U,i=O,a=F,u=R,c=r;return I(),M(c,null,{toolsLeft:L((function(){return[D(n,{type:"primary",onClick:b},{default:L((function(){return[A("添加自定义重定向")]})),_:1})]})),toolsRight:L((function(){return[D(o,{value:W(l).keyword,"onUpdate:value":e[0]||(e[0]=function(t){return W(l).keyword=t}),placeholder:t.$t("CustomRule.Search"),onSearch:m},null,8,["value","placeholder"])]})),content:L((function(){return[Zn,D(i,{loading:W(p),data:W(d).data,columns:W(E)},null,8,["loading","data","columns"])]})),pageRight:L((function(){return[D(a,{page:W(l).p,"onUpdate:page":e[1]||(e[1]=function(t){return W(l).p=t}),"page-size":W(l).p_size,"onUpdate:pageSize":e[2]||(e[2]=function(t){return W(l).p_size=t}),"item-count":W(d).total,onRefresh:h},null,8,["page","page-size","item-count"])]})),modal:L((function(){return[D(u,{show:W(y).show,"onUpdate:show":e[3]||(e[3]=function(t){return W(y).show=t}),title:W(y).title,data:W(y).data,padding:"0","is-footer":!0,component:Qn},null,8,["show","title","data"])]})),_:1})}}}))}}}))}();
