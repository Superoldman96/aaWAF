import{d as e,r as t,w as l,y as a,K as n,P as s,o,S as i,B as c}from"./vue.314199b7.1742181728921.js";const r=e({__name:"index",props:{query:{type:String,required:!0,default:""},visible:{type:Boolean,default:!1}},setup(e){const r=e,d=t(!0),h=t(null),u=(e,t)=>{var l;if(3===e.nodeType){const a=e,n=a.data.match(t);if(n){const e=document.createElement("span");if(e.classList.add("high-search"),e.dataset.highlight="yes",e.dataset.highlightMatch="".concat(n[0]),void 0!==n.index){const t=a.splitText(n.index);t.splitText(n[0].length);const s=document.createTextNode(t.data);e.appendChild(s),null==(l=null==t?void 0:t.parentNode)||l.replaceChild(e,t)}}}else if(1===e.nodeType){const l=e;if(!/script|style/.test(l.tagName.toLowerCase())&&"yes"!==l.dataset.highlight){const{childNodes:l}=e;for(let e=0;e<l.length;e++)u(l[e],t)}}};return l((()=>r.query),(e=>{var t;if((()=>{var e;const t=null==(e=h.value)?void 0:e.querySelectorAll('[data-highlight="yes"]');null==t||t.forEach((e=>{const t=e,{parentNode:l,childNodes:a,nextSibling:n}=t;a.forEach((e=>{null==l||l.insertBefore(e,n)}));const s=document.createTextNode("");null==l||l.replaceChild(s,t),null==l||l.normalize()}))})(),e){const l=(e=>{let t="";[].concat(e).forEach((e=>{const l=e.replace(/[.[*?+^$|()/]|\]|\\/g,"\\$&");t+="|(".concat(l,")")})),t=t.substring(1);const l=new RegExp("^".concat(t,"$"),"i");return[new RegExp(t,"i"),l]})(e);null==(t=h.value)||t.childNodes.forEach((e=>{u(e,l[0])})),(()=>{var e;const t=null==(e=h.value)?void 0:e.querySelectorAll('[data-highlight="yes"]');d.value=0!==(null==t?void 0:t.length)})()}else d.value=!0})),(t,l)=>a((o(),i("div",{ref_key:"wordHighRef",ref:h},[c(t.$slots,"default")],512)),[[n,s(d)||e.visible]])}});export{r as _};
