import{eS as e,bj as t,e8 as s,F as r,dp as i,e6 as o,er as a,bf as n,et as l}from"./index.fc641b56.1742181728921.js";import{K as p,c as d,r as u,p as c,d as f,m as v,h,n as m,s as S,x as y,z as g,J as b,L as w}from"./vue.314199b7.1742181728921.js";import{g as x}from"./get-slot.a0e67e91.1742181728921.js";function R(e,t){var s;if(null==e)return;const r=function(e){if("number"==typeof e)return{"":e.toString()};const t={};return e.split(/ +/).forEach((e=>{if(""===e)return;const[s,r]=e.split(":");void 0===r?t[""]=s:t[s]=r})),t}(e);if(void 0===t)return r[""];if("string"==typeof t)return null!==(s=r[t])&&void 0!==s?s:r[""];if(Array.isArray(t)){for(let e=t.length-1;e>=0;--e){const s=t[e];if(s in r)return r[s]}return r[""]}{let e,s=-1;return Object.keys(r).forEach((i=>{const o=Number(i);!Number.isNaN(o)&&t>=o&&o>=s&&(s=o,e=r[i])})),e}}const G={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};const C={};const N=t("n-grid"),E=1,_=f({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:{span:{type:[Number,String],default:E},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},setup(){const{isSsrRef:e,xGapRef:t,itemStyleRef:r,overflowRef:i,layoutShiftDisabledRef:o}=v(N),a=m();return{overflow:i,itemStyle:r,layoutShiftDisabled:o,mergedXGap:d((()=>s(t.value||0))),deriveStyle:()=>{e.value;const{privateSpan:r=E,privateShow:i=!0,privateColStart:o,privateOffset:n=0}=a.vnode.props,{value:l}=t,p=s(l||0);return{display:i?"":"none",gridColumn:"".concat(null!=o?o:"span ".concat(r)," / span ").concat(r),marginLeft:n?"calc((100% - (".concat(r," - 1) * ").concat(p,") / ").concat(r," * ").concat(n," + ").concat(p," * ").concat(n,")"):""}}}},render(){var e,t;if(this.layoutShiftDisabled){const{span:e,offset:t,mergedXGap:s}=this;return h("div",{style:{gridColumn:"span ".concat(e," / span ").concat(e),marginLeft:t?"calc((100% - (".concat(e," - 1) * ").concat(s,") / ").concat(e," * ").concat(t," + ").concat(s," * ").concat(t,")"):""}},this.$slots)}return h("div",{style:[this.itemStyle,this.deriveStyle()]},null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e,{overflow:this.overflow}))}}),D={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},j="__ssr__",B=f({name:"Grid",inheritAttrs:!1,props:{layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:24},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},setup(t){const{mergedClsPrefixRef:a,mergedBreakpointsRef:n}=r(t),p=/^\d+$/,f=u(void 0),v=function(t=G){if(!e)return d((()=>[]));if("function"!=typeof window.matchMedia)return d((()=>[]));const s=u({}),r=Object.keys(t),i=(e,t)=>{e.matches?s.value[t]=!0:s.value[t]=!1};return r.forEach((e=>{const s=t[e];let r,o;void 0===C[s]?(r=window.matchMedia("(min-width: ".concat(s,"px)")),r.addEventListener?r.addEventListener("change",(t=>{o.forEach((s=>{s(t,e)}))})):r.addListener&&r.addListener((t=>{o.forEach((s=>{s(t,e)}))})),o=new Set,C[s]={mql:r,cbs:o}):(r=C[s].mql,o=C[s].cbs),o.add(i),r.matches&&o.forEach((t=>{t(r,e)}))})),c((()=>{r.forEach((e=>{const{cbs:s}=C[t[e]];s.has(i)&&s.delete(i)}))})),d((()=>{const{value:e}=s;return r.filter((t=>e[t]))}))}((null==n?void 0:n.value)||D),h=i((()=>!!t.itemResponsive||(!p.test(t.cols.toString())||(!p.test(t.xGap.toString())||!p.test(t.yGap.toString()))))),m=d((()=>{if(h.value)return"self"===t.responsive?f.value:v.value})),b=i((()=>{var e;return null!==(e=Number(R(t.cols.toString(),m.value)))&&void 0!==e?e:24})),w=i((()=>R(t.xGap.toString(),m.value))),x=i((()=>R(t.yGap.toString(),m.value))),E=e=>{f.value=e.contentRect.width},_=e=>{l(E,e)},B=u(!1),L=d((()=>{if("self"===t.responsive)return _})),O=u(!1),$=u();return S((()=>{const{value:e}=$;e&&e.hasAttribute(j)&&(e.removeAttribute(j),O.value=!0)})),y(N,{layoutShiftDisabledRef:g(t,"layoutShiftDisabled"),isSsrRef:O,itemStyleRef:g(t,"itemStyle"),xGapRef:w,overflowRef:B}),{isSsr:!o,contentEl:$,mergedClsPrefix:a,style:d((()=>t.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:"repeat(".concat(t.cols,", minmax(0, 1fr))"),columnGap:s(t.xGap),rowGap:s(t.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:"repeat(".concat(b.value,", minmax(0, 1fr))"),columnGap:s(w.value),rowGap:s(x.value)})),isResponsive:h,responsiveQuery:m,responsiveCols:b,handleResize:L,overflow:B}},render(){if(this.layoutShiftDisabled)return h("div",b({ref:"contentEl",class:"".concat(this.mergedClsPrefix,"-grid"),style:this.style},this.$attrs),this.$slots);const e=()=>{var e,t,s,r,i,o,a;this.overflow=!1;const l=n(x(this)),d=[],{collapsed:u,collapsedRows:c,responsiveCols:f,responsiveQuery:v}=this;l.forEach((e=>{var t,s,r,i;if(!0!==(null===(t=null==e?void 0:e.type)||void 0===t?void 0:t.__GRID_ITEM__))return;if(function(e){var t;const s=null===(t=e.dirs)||void 0===t?void 0:t.find((({dir:e})=>e===p));return!(!s||!1!==s.value)}(e)){const t=w(e);return t.props?t.props.privateShow=!1:t.props={privateShow:!1},void d.push({child:t,rawChildSpan:0})}e.dirs=(null===(s=e.dirs)||void 0===s?void 0:s.filter((({dir:e})=>e!==p)))||null;const o=w(e),a=Number(null!==(i=R(null===(r=o.props)||void 0===r?void 0:r.span,v))&&void 0!==i?i:1);0!==a&&d.push({child:o,rawChildSpan:a})}));let m=0;const S=null===(e=d[d.length-1])||void 0===e?void 0:e.child;if(null==S?void 0:S.props){const e=null===(t=S.props)||void 0===t?void 0:t.suffix;void 0!==e&&!1!==e&&(m=null!==(r=null===(s=S.props)||void 0===s?void 0:s.span)&&void 0!==r?r:1,S.props.privateSpan=m,S.props.privateColStart=f+1-m,S.props.privateShow=null===(i=S.props.privateShow)||void 0===i||i)}let y=0,g=!1;for(const{child:n,rawChildSpan:p}of d){if(g&&(this.overflow=!0),!g){const e=Number(null!==(a=R(null===(o=n.props)||void 0===o?void 0:o.offset,v))&&void 0!==a?a:0),t=Math.min(p+e,f);if(n.props?(n.props.privateSpan=t,n.props.privateOffset=e):n.props={privateSpan:t,privateOffset:e},u){const e=y%f;t+e>f&&(y+=f-e),t+y+m>c*f?g=!0:y+=t}}g&&(n.props?!0!==n.props.privateShow&&(n.props.privateShow=!1):n.props={privateShow:!1})}return h("div",b({ref:"contentEl",class:"".concat(this.mergedClsPrefix,"-grid"),style:this.style,[j]:this.isSsr||void 0},this.$attrs),d.map((({child:e})=>e)))};return this.isResponsive&&"self"===this.responsive?h(a,{onResize:this.handleResize},{default:e}):e()}});export{B as _,_ as a};
