import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.6f36d91a.1742181728921.js";import{l as e,m as t,f as l,n as o,S as r,o as n,$ as p,r as s,A as i}from"./index.fc641b56.1742181728921.js";import{s as u,e as d,d as c,b as m,c as f}from"./group.cd4e7dcc.1742181728921.js";import{_ as v}from"./index.29125cc8.1742181728921.js";import{d as b,W as h,u as w,r as I,o as _,b as x,e as G,f as k,U as y,P as g,$ as P,k as j,m as F,S as $,F as C,l as E}from"./vue.314199b7.1742181728921.js";import{b as q}from"./DataTable.762c357a.1742181728921.js";import"./layer.8f9c8930.1742181728921.js";import"./Checkbox.64335fca.1742181728921.js";import"./get-slot.a0e67e91.1742181728921.js";import"./utils.d31cac41.1742181728921.js";const U={class:"w-300px"},D={class:"w-300px"},S=y("p",null,"192.168.1.1",-1),T=y("p",null,"192.168.1.0/24",-1),B=y("p",null,"2606:54c0:19c0:dc02::/63",-1),M=y("p",null,"2606:54c0:19c0:dc02::",-1),W=b({__name:"index",emits:["refresh"],setup(a,{emit:n}){const{t:p}=h(),s=w({data:"",name:""}),i=w({name:{trigger:"blur",required:!0,validator:()=>""!==s.name||new Error("".concat(p("IpGroup.Form.Placeholder")))},ip:{trigger:"blur",required:!0,validator:()=>""!==s.data||new Error("".concat(p("IpGroup.Form.Ip")))}}),d=I(null),c=async()=>{var a;await(null==(a=d.value)?void 0:a.validate());const e=s.data.split("\n");await u({data:e,name:s.name}),m(),n("refresh")},m=()=>{s.name="",s.data=""};return(a,n)=>{const p=e,u=t,m=v,f=l,b=o,h=r;return _(),x(h,{class:"mb-16px",title:a.$t("IpGroup.Add")},{default:G((()=>[k(b,{ref_key:"formRef",ref:d,model:g(s),rules:g(i),"label-width":"70px","label-placement":"left","require-mark-placement":"left"},{default:G((()=>[k(u,{label:a.$t("IpGroup.Form.Name"),path:"name"},{default:G((()=>[y("div",U,[k(p,{value:g(s).name,"onUpdate:value":n[0]||(n[0]=a=>g(s).name=a),spellcheck:"false",placeholder:a.$t("IpGroup.Form.Placeholder")},null,8,["value","placeholder"])])])),_:1},8,["label"]),k(u,{label:"IP",path:"ip"},{default:G((()=>[y("div",D,[k(m,{value:g(s).data,"onUpdate:value":n[1]||(n[1]=a=>g(s).data=a),rows:8},{default:G((()=>[y("p",null,P(a.$t("IpGroup.Form.Ipv4")),1),S,T,y("p",null,P(a.$t("IpGroup.Form.Ipv6")),1),B,M])),_:1},8,["value"])])])),_:1}),k(u,{label:" ","show-feedback":!1},{default:G((()=>[k(f,{type:"primary",onClick:c},{default:G((()=>[j(P(a.$t("Public.Btn.Submit")),1)])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title"])}}}),A={class:"w-380px"},N={class:"w-300px"},O={class:"w-300px"},R=y("p",null,"192.168.1.1",-1),H=y("p",null,"192.168.1.0/24",-1),L=y("p",null,"192.168.10.1-192.168.10.255",-1),z=y("p",null,"2606:54c0:19c0:dc02::/63",-1),Q=y("p",null,"2606:54c0:19c0:dc02::",-1),J=b({__name:"index",setup(a,{expose:l}){const{t:r}=h(),{row:n,callback:p}=F("component-data")||{},s=w({name:"",data:""}),i=w({name:{trigger:"blur",required:!0,validator:()=>""!==s.name||new Error("".concat(r("IpGroup.Form.Placeholder")))},ip:{trigger:"blur",required:!0,validator:()=>""!==s.data||new Error("".concat(r("IpGroup.Form.Ip")))}}),u=I(null);l({onConfirm:async a=>{var e;if("堡塔恶意IP库"===n.name)a();else{await(null==(e=u.value)?void 0:e.validate());const t=s.data.split("\n");await d({name:s.name,data:t}),null==p||p(),a()}}});return s.name=n.name,s.data=n.data.replace(/，/g,"\n"),(a,l)=>{const r=e,p=t,d=v,c=o;return _(),$("div",A,[k(c,{ref_key:"formRef",ref:u,model:g(s),rules:g(i),"label-width":"70px","label-placement":"left","require-mark-placement":"left"},{default:G((()=>[k(p,{label:a.$t("IpGroup.Form.Name"),path:"name"},{default:G((()=>[y("div",N,[k(r,{value:g(s).name,"onUpdate:value":l[0]||(l[0]=a=>g(s).name=a),spellcheck:"false",placeholder:a.$t("IpGroup.Form.Placeholder"),disabled:!0},null,8,["value","placeholder"])])])),_:1},8,["label"]),k(p,{label:"IP",path:"ip"},{default:G((()=>[y("div",O,[k(d,{value:g(s).data,"onUpdate:value":l[1]||(l[1]=a=>g(s).data=a),rows:8,disabled:"堡塔恶意IP库"===g(n).name},{default:G((()=>[y("p",null,P(a.$t("IpGroup.Form.Ipv4")),1),R,H,L,y("p",null,P(a.$t("IpGroup.Form.Ipv6")),1),z,Q])),_:1},8,["value","disabled"])])])),_:1})])),_:1},8,["model","rules"])])}}}),K={class:"p-16px"};const V=b({__name:"index",setup(e){const{t:t}=h(),l=I([]),o=async()=>{l.value=[];const{res:a}=await m({p:1,p_size:1e5,sort:3,keyword:""});if(s(a)){const e=a.map((a=>a.ip));l.value.push({name:"堡塔恶意IP库",data:e.join("，")})}const{res:e}=await f();s(a)&&Object.keys(e).forEach((a=>{l.value.push({name:a,data:e[a].join("，")})}))},u=w({show:!1,title:"".concat(t("IpGroup.EditModal")),data:{row:{},callback:o}}),d=I([{key:"name",title:"".concat(t("IpGroup.Table.Name")),width:"12%",minWidth:100},{key:"data",title:"".concat(t("IpGroup.Table.Data")),width:"50%",ellipsis:{tooltip:{width:"trigger",scrollable:!0,contentStyle:{maxHeight:"400px",maxWidth:"80%",lineHeight:"25px"}}}},{key:"action",title:"".concat(t("Public.Table.Action")),width:"6%",minWidth:90,render:a=>{let e;return k(C,null,[k(n,{onClick:()=>{v(a)}},{default:()=>["堡塔恶意IP库"===a.name?"查看":t("Public.Btn.Edit")]}),k(n,{disabled:"堡塔恶意IP库"===a.name,style:{marginLeft:"10px"},onClick:()=>{b(a)}},(l=e=t("Public.Btn.Del"),"function"==typeof l||"[object Object]"===Object.prototype.toString.call(l)&&!E(l)?e:{default:()=>[e]}))]);var l}}]),v=a=>{u.data.row=a,u.title="堡塔恶意IP库"===a.name?"查看":"".concat(t("IpGroup.EditModal")," -【").concat(a.name,"】"),u.show=!0},b=a=>{p({title:"".concat(t("IpGroup.DelModal.Title")," -【").concat(a.name,"】"),content:"".concat(t("IpGroup.DelModal.Content")),onConfirm:async()=>{await c({name:a.name}),o()}})};return o(),(e,t)=>{const n=q,p=i,s=a,c=r;return _(),$("div",K,[k(W,{onRefresh:o}),k(c,{title:e.$t("IpGroup.List")},{default:G((()=>[k(s,null,{content:G((()=>[k(n,{data:g(l),columns:g(d)},null,8,["data","columns"])])),modal:G((()=>[k(p,{show:g(u).show,"onUpdate:show":t[0]||(t[0]=a=>g(u).show=a),title:g(u).title,data:g(u).data,"is-footer":!0,component:J},null,8,["show","title","data"])])),_:1})])),_:1},8,["title"])])}}});export{V as default};
