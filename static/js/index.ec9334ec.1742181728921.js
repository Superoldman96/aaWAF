import{_ as t}from"./index.vue_vue_type_script_setup_true_lang.609fbee0.1742181728921.js";import{_ as e}from"./index.vue_vue_type_script_setup_true_lang.6f36d91a.1742181728921.js";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.5eb11789.1742181728921.js";import{_ as i}from"./index.vue_vue_type_script_setup_true_lang.141d1f64.1742181728921.js";import{d as n,W as o,Z as c,X as s,r as l,f as r,F as d,b as p,e as _,l as u,o as m,P as h,U as f}from"./vue.314199b7.1742181728921.js";import{cA as y,o as g,$ as b,cB as k,az as x,cC as j}from"./index.fc641b56.1742181728921.js";import{N as v}from"./Switch.4c664df7.1742181728921.js";import{_ as A}from"./utils.d31cac41.1742181728921.js";import"./DataTable.762c357a.1742181728921.js";import"./Checkbox.64335fca.1742181728921.js";import"./get-slot.a0e67e91.1742181728921.js";import"./layer.8f9c8930.1742181728921.js";const C=f("p",{class:"text-desc mb-10px"},"*注：命中次数与命中率每30秒同步一次",-1);function w(t){return"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!u(t)}const T=n({__name:"index",setup(n){const{t:u}=o(),f=c(),T=y(),{table:W,search:z,loading:P}=s(T),S=async()=>{await T.getList()},U=l([{key:"site_name",title:"".concat(u("Acceleration.Table.Name")),width:"16%",minWidth:130,render:t=>r(g,{onClick:()=>{R(t)}},{default:()=>[t.site_name||"-"]})},{key:"open",title:"".concat(u("Acceleration.Table.Status")),width:"10%",minWidth:100,render:t=>r(v,{value:t.open,"onUpdate:value":e=>t.open=e,size:"small",onClick:()=>{B(t)}},null)},{key:"expire",title:"".concat(u("Acceleration.Table.Expire")),width:"10%",minWidth:100,render:t=>t.fake?"-":"".concat(t.expire).concat(u("Public.Unit.Seconds"))},{key:"overall_rate",title:"".concat(u("Acceleration.Table.OverallRate")),width:"10%",minWidth:100,render:t=>t.fake?"-":0===t.hit.hit?"0%":"".concat((t.hit.hit/t.hit.req*100).toFixed(2),"%")},{key:"todat_hit_rate",title:"".concat(u("Acceleration.Table.TodayHitRate")),width:"10%",minWidth:100,render:t=>t.fake?"-":0===t.hit.today_hit?"0%":"".concat((t.hit.today_hit/t.hit.today_req*100).toFixed(2),"%")},{key:"hit",title:"".concat(u("Acceleration.Table.Hit")),width:"10%",minWidth:100,render:t=>t.fake?"-":r(d,null,[r(A,{bordered:!1,type:t.hit.today_hit>0?"success":"",size:"small"},{default:()=>[t.hit.today_hit]})])},{key:"action",title:"".concat(u("Public.Table.Action")),width:"8%",minWidth:100,render:t=>{let e,a;return r(d,null,[r(g,{disabled:0===t.hit.today_hit,onClick:()=>{M(t)}},w(e=u("Public.Btn.ClearHit"))?e:{default:()=>[e]}),r(g,{style:{marginLeft:"10px"},disabled:!!t.fake,onClick:()=>{R(t)}},w(a=u("Acceleration.ConfigBtn"))?a:{default:()=>[a]})])}}]),M=t=>{b({title:"".concat(u("Acceleration.EmptyModal.Title")),content:"".concat(u("Acceleration.EmptyModal.Content")),onConfirm:async()=>{await k({site_id:t.site_id,site_name:t.site_name,type:"1"}),S()}})},R=t=>{t.fake?x("".concat(u("Acceleration.WarningMsg"))):(T.setSite(t),f.push("/acceleration/config"))},B=async t=>{const e=(t=>({site_id:t.site_id,site_name:t.site_name,open:t.open}))(t);t.fake?b({title:"".concat(u("Public.Confirm.Title")),content:"".concat(u("Acceleration.TipModal",{name:t.site_id})),onConfirm:async()=>{await j(e),S()}}):(await j(e),S())};return S(),(n,o)=>{const c=i,s=a,l=e,d=t;return m(),p(d,null,{default:_((()=>[r(l,null,{content:_((()=>[C,r(c,{loading:h(P),data:h(W).data,columns:h(U)},null,8,["loading","data","columns"])])),pageRight:_((()=>[r(s,{page:h(z).p,"onUpdate:page":o[0]||(o[0]=t=>h(z).p=t),"page-size":h(z).p_size,"onUpdate:pageSize":o[1]||(o[1]=t=>h(z).p_size=t),"store-key":"site","item-count":h(W).total,onRefresh:S},null,8,["page","page-size","item-count"])])),_:1})])),_:1})}}});export{T as default};
